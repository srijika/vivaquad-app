{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createPromiseMiddleware;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime/core-js/promise\"));\n\nvar _constants = require(\"./constants\");\n\nfunction createPromiseMiddleware(app) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        var type = action.type;\n\n        if (isEffect(type)) {\n          return new _promise.default(function (resolve, reject) {\n            next((0, _objectSpread2.default)({\n              __dva_resolve: resolve,\n              __dva_reject: reject\n            }, action));\n          });\n        } else {\n          return next(action);\n        }\n      };\n    };\n  };\n\n  function isEffect(type) {\n    if (!type || typeof type !== 'string') return false;\n\n    var _type$split = type.split(_constants.NAMESPACE_SEP),\n        _type$split2 = (0, _slicedToArray2.default)(_type$split, 1),\n        namespace = _type$split2[0];\n\n    var model = app._models.filter(function (m) {\n      return m.namespace === namespace;\n    })[0];\n\n    if (model) {\n      if (model.effects && model.effects[type]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/node_modules/dva-core/lib/createPromiseMiddleware.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","createPromiseMiddleware","_slicedToArray2","_objectSpread2","_promise","_constants","app","next","action","type","isEffect","resolve","reject","__dva_resolve","__dva_reject","_type$split","split","NAMESPACE_SEP","_type$split2","namespace","model","_models","filter","m","effects"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,uBAAlB;;AAEA,IAAIC,eAAe,GAAGR,sBAAsB,CAACC,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,IAAIQ,cAAc,GAAGT,sBAAsB,CAACC,OAAO,CAAC,qCAAD,CAAR,CAA3C;;AAEA,IAAIS,QAAQ,GAAGV,sBAAsB,CAACC,OAAO,CAAC,gCAAD,CAAR,CAArC;;AAEA,IAAIU,UAAU,GAAGV,OAAO,CAAC,aAAD,CAAxB;;AAEA,SAASM,uBAAT,CAAiCK,GAAjC,EAAsC;AACpC,SAAO,YAAY;AACjB,WAAO,UAAUC,IAAV,EAAgB;AACrB,aAAO,UAAUC,MAAV,EAAkB;AACvB,YAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;;AAEA,YAAIC,QAAQ,CAACD,IAAD,CAAZ,EAAoB;AAClB,iBAAO,IAAIL,QAAQ,CAACJ,OAAb,CAAqB,UAAUW,OAAV,EAAmBC,MAAnB,EAA2B;AACrDL,YAAAA,IAAI,CAAC,CAAC,GAAGJ,cAAc,CAACH,OAAnB,EAA4B;AAC/Ba,cAAAA,aAAa,EAAEF,OADgB;AAE/BG,cAAAA,YAAY,EAAEF;AAFiB,aAA5B,EAGFJ,MAHE,CAAD,CAAJ;AAID,WALM,CAAP;AAMD,SAPD,MAOO;AACL,iBAAOD,IAAI,CAACC,MAAD,CAAX;AACD;AACF,OAbD;AAcD,KAfD;AAgBD,GAjBD;;AAmBA,WAASE,QAAT,CAAkBD,IAAlB,EAAwB;AACtB,QAAI,CAACA,IAAD,IAAS,OAAOA,IAAP,KAAgB,QAA7B,EAAuC,OAAO,KAAP;;AAEvC,QAAIM,WAAW,GAAGN,IAAI,CAACO,KAAL,CAAWX,UAAU,CAACY,aAAtB,CAAlB;AAAA,QACIC,YAAY,GAAG,CAAC,GAAGhB,eAAe,CAACF,OAApB,EAA6Be,WAA7B,EAA0C,CAA1C,CADnB;AAAA,QAEII,SAAS,GAAGD,YAAY,CAAC,CAAD,CAF5B;;AAIA,QAAIE,KAAK,GAAGd,GAAG,CAACe,OAAJ,CAAYC,MAAZ,CAAmB,UAAUC,CAAV,EAAa;AAC1C,aAAOA,CAAC,CAACJ,SAAF,KAAgBA,SAAvB;AACD,KAFW,EAET,CAFS,CAAZ;;AAIA,QAAIC,KAAJ,EAAW;AACT,UAAIA,KAAK,CAACI,OAAN,IAAiBJ,KAAK,CAACI,OAAN,CAAcf,IAAd,CAArB,EAA0C;AACxC,eAAO,IAAP;AACD;AACF;;AAED,WAAO,KAAP;AACD;AACF","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createPromiseMiddleware;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime/core-js/promise\"));\n\nvar _constants = require(\"./constants\");\n\nfunction createPromiseMiddleware(app) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        var type = action.type;\n\n        if (isEffect(type)) {\n          return new _promise.default(function (resolve, reject) {\n            next((0, _objectSpread2.default)({\n              __dva_resolve: resolve,\n              __dva_reject: reject\n            }, action));\n          });\n        } else {\n          return next(action);\n        }\n      };\n    };\n  };\n\n  function isEffect(type) {\n    if (!type || typeof type !== 'string') return false;\n\n    var _type$split = type.split(_constants.NAMESPACE_SEP),\n        _type$split2 = (0, _slicedToArray2.default)(_type$split, 1),\n        namespace = _type$split2[0];\n\n    var model = app._models.filter(function (m) {\n      return m.namespace === namespace;\n    })[0];\n\n    if (model) {\n      if (model.effects && model.effects[type]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}"]},"metadata":{},"sourceType":"script"}