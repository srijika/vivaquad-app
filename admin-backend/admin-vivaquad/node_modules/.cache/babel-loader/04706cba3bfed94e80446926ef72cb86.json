{"ast":null,"code":"import _objectSpread from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Component,useEffect}from'react';import Apploader from'./../../components/loader/loader';import{Redirect,Route}from'react-router';import{UserOutlined,LockOutlined,MailOutlined,MobileOutlined,EyeInvisibleOutlined,EyeTwoTone}from'@ant-design/icons';import{connect}from'dva';import{Link}from'react-router-dom';import Logo from'../../assets/img/logo.png';import UploadImages from'./../../components/upload-images/index';//import styles from './login.less';\nimport{Modal,Row,Col,Form,Input,Button,Avatar,message,Select,Checkbox,Radio}from'antd';var FormItem=Form.Item;var Option=Select.Option;var formRef=React.createRef();var AppRegister=function AppRegister(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),imagesList=_useState8[0],setImagesList=_useState8[1];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var handelPassword=function handelPassword(){setShowPassword(!showPassword);};var updateImageData=function updateImageData(val){setImagesList(val);form.setFieldsValue({images:[]});};var onFinish=function onFinish(values){if(imagesList.length===0){return message.error(\"please upload logo\");}values.images=imagesList;values.roleType=\"SUBADMIN\";localStorage.setItem(\"flow\",'reg');localStorage.setItem(\"user_email\",values.email);var formData=new FormData();formData.append(\"school_name\",values.school_name);formData.append(\"roleType\",values.roleType);formData.append(\"password\",values.password);formData.append(\"owner_name\",values.owner_name);formData.append(\"mobile_number\",values.mobile_number);formData.append(\"images\",values.images[0].file);formData.append(\"email\",values.email);formData.append(\"address\",values.address);props.dispatch({type:'auth/register',payload:formData});};useEffect(function(){var unmounted=false;setTimeout(function(){return document.title='register';},100);var register=props.auth.reg;if(!unmounted&&register.action&&register.action.status===true&&register.action.count>count){var _formRef$current$setF;setCount(register.action.count);props.dispatch({type:'auth/registerSuccess'});formRef.current.setFieldsValue((_formRef$current$setF={},_defineProperty(_formRef$current$setF,'name',''),_defineProperty(_formRef$current$setF,'email',''),_defineProperty(_formRef$current$setF,'mobile_number',''),_defineProperty(_formRef$current$setF,'username',''),_defineProperty(_formRef$current$setF,'password',''),_defineProperty(_formRef$current$setF,'gstin',''),_defineProperty(_formRef$current$setF,'fssai',''),_formRef$current$setF));setTimeout(function(){Modal.success({content:'Registered Successfully! Vivaquad team will contact you soon',onOk:function onOk(){props.history.push('/verify');}});},300);}return function(){unmounted=true;};},[props.auth.reg]);useEffect(function(){var unmounted=false;var response=[];var alrdreg=props.auth.alrdreg;if(alrdreg.action&&alrdreg.action.status===false){props.dispatch({type:'auth/alrdregisterSuccess'});props.dispatch(_objectSpread({type:'auth/alrdreg'},response));props.history.push('/login');}return function(){unmounted=true;};},[props.auth.alrdreg]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Apploader,{show:props.loading.global}),/*#__PURE__*/React.createElement(Row,{type:\"flex\",className:\"basicpage\",justify:\"space-around\",align:\"middle\",style:{minHeight:'100vh'}},/*#__PURE__*/React.createElement(Col,{className:\"basicbox \"},/*#__PURE__*/React.createElement(\"div\",{className:\"mainimg registerimg basicbox_height\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"mainform mobile_mainform\"},/*#__PURE__*/React.createElement(Form,{ref:formRef,layout:'vertical',name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:onFinish},/*#__PURE__*/React.createElement(Form.Item,{name:\"owner_name\",rules:[{required:true,message:'Please input owner name!'},{pattern:/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/,message:'letters and digits, with hyphens, underscores and spaces as internal separator'},{max:25,message:'owner name must not be greater than 25 characters.'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter owner name\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"school_name\",rules:[{required:true,message:'Please input school name!'},{max:50,message:'school name must not be greater than 50 characters.'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter school name\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"email\",rules:[{required:true,message:'Please input your Email!'},{type:'email',message:'The input is not valid E-mail!'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(MailOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Email\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"mobile_number\",rules:[{required:true,message:'Please input your Phone Number!'},{pattern:/^[0-9]+$/,message:'Need to enter number'},{len:10,message:'Phone number should be 10 digits long.'}]},/*#__PURE__*/React.createElement(Input,{type:\"tel\",prefix:/*#__PURE__*/React.createElement(MobileOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Phone Number\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"address\",rules:[{required:true,message:'Please input address!'},{max:100,message:'address must not be greater than 100 characters.'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Enter school address\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"password\",rules:[{required:true,message:'Please input your Password!'},{pattern:/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,message:'Minimum eight characters, at least one letter, one number and one special character:'}]},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(LockOutlined,{className:\"site-form-item-icon\"}),type:showPassword?'text':'password',placeholder:\"Password\",suffix:showPassword?/*#__PURE__*/React.createElement(EyeTwoTone,{onClick:handelPassword}):/*#__PURE__*/React.createElement(EyeInvisibleOutlined,{onClick:handelPassword})})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},imagesList.map(function(item,index){console.log(item);return/*#__PURE__*/React.createElement(Avatar,{key:index,shape:\"square\",size:80,src:item.urls||item,style:{marginBottom:'2px'}});}),imagesList.length>0?/*#__PURE__*/React.createElement(\"br\",null):'',imagesList.length>0?/*#__PURE__*/React.createElement(Button,{className:\"upload_logo\",onClick:function onClick(){return setVisible(true);}},\" Edit Logo \"):/*#__PURE__*/React.createElement(Button,{className:\"upload_logo\",onClick:function onClick(){return setVisible(true);}},\" Upload Logo \")),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button mobile-register-form-button\"},\" Sign Up \"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Or \",/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return props.history.push('/');}},/*#__PURE__*/React.createElement(\"a\",{href:\"#\",className:\"mobile-register-already\"},\"Already have a account!\")))),/*#__PURE__*/React.createElement(UploadImages,{visible:visible,closeFun:function closeFun(){return setVisible(false);},returnImg:function returnImg(val){return updateImageData(val);},resetVal:imagesList,aspect:9/12})))));};export default connect(function(_ref){var auth=_ref.auth,loading=_ref.loading;return{auth:auth,loading:loading};})(AppRegister);","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/pages/auth/register.js"],"names":["React","useState","Component","useEffect","Apploader","Redirect","Route","UserOutlined","LockOutlined","MailOutlined","MobileOutlined","EyeInvisibleOutlined","EyeTwoTone","connect","Link","Logo","UploadImages","Modal","Row","Col","Form","Input","Button","Avatar","message","Select","Checkbox","Radio","FormItem","Item","Option","formRef","createRef","AppRegister","props","count","setCount","visible","setVisible","showPassword","setShowPassword","imagesList","setImagesList","useForm","form","handelPassword","updateImageData","val","setFieldsValue","images","onFinish","values","length","error","roleType","localStorage","setItem","email","formData","FormData","append","school_name","password","owner_name","mobile_number","file","address","dispatch","type","payload","unmounted","setTimeout","document","title","register","auth","reg","action","status","current","success","content","onOk","history","push","response","alrdreg","loading","global","minHeight","remember","required","pattern","max","len","map","item","index","console","log","urls","marginBottom"],"mappings":"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","sourcesContent":["import React, {useState, Component, useEffect } from 'react';\r\nimport Apploader from './../../components/loader/loader'\r\nimport {Redirect, Route} from 'react-router';\r\nimport { UserOutlined, LockOutlined , MailOutlined, MobileOutlined, EyeInvisibleOutlined, EyeTwoTone} from '@ant-design/icons';\r\nimport { connect } from 'dva';\r\nimport { Link } from 'react-router-dom';\r\nimport Logo from '../../assets/img/logo.png';\r\nimport UploadImages from './../../components/upload-images/index'\r\n\r\n\r\n//import styles from './login.less';\r\n\r\nimport { Modal,  Row,Col, Form, Input, Button, Avatar,message, Select, Checkbox, Radio } from 'antd';\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\nconst formRef = React.createRef();\r\n\r\n\r\nconst AppRegister = (props) => {\r\n\tconst [count, setCount] = useState(0);\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\tconst [imagesList, setImagesList] = useState([]);\r\n\tconst [form] = Form.useForm();\r\n\r\n\t\r\nconst  handelPassword = () => {\r\n\tsetShowPassword(!showPassword);\r\n\t\r\n}\r\n\r\nconst updateImageData= val=>{\r\n\tsetImagesList(val); \r\n\tform.setFieldsValue({images:[]});\r\n\r\n}\r\n\tconst onFinish = values => {\r\n\t\r\n\t\tif(imagesList.length === 0){\r\n\t\t\treturn message.error(\"please upload logo\");\r\n\t\t}\r\n\t\tvalues.images = imagesList;\r\n\t\tvalues.roleType = \"SUBADMIN\";\r\n\t\tlocalStorage.setItem(\"flow\", 'reg');\r\n\t\tlocalStorage.setItem(\"user_email\", values.email);\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"school_name\",values.school_name)\r\n\t\tformData.append(\"roleType\",values.roleType)\r\n\t\tformData.append(\"password\",values.password)\r\n\t\tformData.append(\"owner_name\",values.owner_name)\r\n\t\tformData.append(\"mobile_number\",values.mobile_number)\r\n\t\tformData.append(\"images\",values.images[0].file)\r\n\t\tformData.append(\"email\",values.email)\r\n\t\tformData.append(\"address\",values.address)\r\n\t\tprops.dispatch({ type: 'auth/register', payload:formData, });\r\n\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tsetTimeout(()=>document.title = 'register', 100);\r\n\t\tlet register = props.auth.reg;\r\n\t\tif(!unmounted && register.action && register.action.status === true && register.action.count > count){\r\n\t\t\tsetCount(register.action.count)\r\n\t\t\tprops.dispatch({ type: 'auth/registerSuccess' });\r\n\t\t\tformRef.current.setFieldsValue({['name']: '', ['email']: '', ['mobile_number']: '', ['username']: '', ['password']: '', ['gstin']: '', ['fssai']: ''});\r\n\t\t\tsetTimeout(() =>  {\r\n\t\t\t\tModal.success({\r\n\t\t\t\t\tcontent:( 'Registered Successfully! Vivaquad team will contact you soon'),\r\n\t\t\t\t\t  onOk() { \r\n\t\t\t\t\t\t\tprops.history.push('/verify')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  });\r\n\t\t\t}, 300)\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[props.auth.reg])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet response = [];\r\n\t\tlet alrdreg = props.auth.alrdreg;\r\n\t\tif(alrdreg.action && alrdreg.action.status === false){\r\n\t\t\tprops.dispatch({ type: 'auth/alrdregisterSuccess' });\r\n\t\t\tprops.dispatch({ type: 'auth/alrdreg', ...response });\r\n\t\t\tprops.history.push('/login');\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n\t},[props.auth.alrdreg])\r\n\r\n\r\n  return (\r\n\t<div>\r\n\t\t<Apploader show={props.loading.global}/>\r\n\t\t<Row type=\"flex\" className={\"basicpage\"} justify=\"space-around\" align=\"middle\" style={{minHeight:'100vh'}}>\r\n\t\t\t<Col  className=\"basicbox \">\r\n\t\t\t\t<div className=\"mainimg registerimg basicbox_height\"></div>\r\n\t\t\t\t<div className=\"mainform mobile_mainform\">\r\n\t\t\r\n\t\t\t\t\t<Form ref={formRef} layout={'vertical'} name=\"normal_login\" className=\"login-form\" initialValues={{ remember: true, }} onFinish={onFinish} >\r\n\t\t\t\t\t<Form.Item name=\"owner_name\" rules={[ \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: 'Please input owner name!'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/,\r\n\t\t\t\t\t\t\t\tmessage: 'letters and digits, with hyphens, underscores and spaces as internal separator'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ max: 25, message: 'owner name must not be greater than 25 characters.' },\r\n\r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter owner name\" />\r\n\t\t\t\t\t  </Form.Item>\t\r\n\t\t\t\t\t  <Form.Item name=\"school_name\" rules={[ \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: 'Please input school name!'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{ max: 50, message: 'school name must not be greater than 50 characters.' },\r\n\r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter school name\" />\r\n\t\t\t\t\t  </Form.Item>\t\t  \r\n\t\t\t\t\t  <Form.Item name=\"email\" rules={[\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\trequired: true, \r\n\t\t\t\t\t\t\t\tmessage: 'Please input your Email!'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\t\t\tmessage: 'The input is not valid E-mail!',\r\n\t\t\t\t\t\t\t}, \r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t<Input prefix={<MailOutlined className=\"site-form-item-icon\" />} placeholder=\"Email\" />\r\n\t\t\t\t\t  </Form.Item>\r\n\t\t\t\t\t  <Form.Item name=\"mobile_number\" rules={[ \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: 'Please input your Phone Number!', \r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: /^[0-9]+$/,\r\n\t\t\t\t\t\t\t\tmessage: 'Need to enter number'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tlen: 10, \r\n\t\t\t\t\t\t\t\tmessage: 'Phone number should be 10 digits long.' \r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t<Input type=\"tel\" prefix={<MobileOutlined className=\"site-form-item-icon\" />} placeholder=\"Phone Number\" />\r\n\t\t\t\t\t  </Form.Item>\r\n\t\t\t\t\t  <Form.Item name=\"address\" rules={[ \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: 'Please input address!'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{ max: 100, message: 'address must not be greater than 100 characters.' },\r\n\r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t<Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter school address\" />\r\n\t\t\t\t\t  </Form.Item>\t\r\n\r\n\t\t\t\t\t  <Form.Item name=\"password\" rules={[ \r\n\t\t\t\t\t\t\t{ \t\r\n\t\t\t\t\t\t\t\trequired: true, \r\n\t\t\t\t\t\t\t\tmessage: 'Please input your Password!', \r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\r\n\t\t\t\t\t\t\t\tmessage: 'Minimum eight characters, at least one letter, one number and one special character:'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t<Input prefix={<LockOutlined className=\"site-form-item-icon\" />} \r\n\t\t\t\t\t\ttype={showPassword ? 'text': 'password'}\r\n\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\tsuffix = {showPassword ? <EyeTwoTone onClick={ handelPassword } /> : <EyeInvisibleOutlined onClick={ handelPassword } /> }\r\n\r\n\t\t\t\t\t\t />\r\n\t\t\t\t\t  </Form.Item>\r\n\t\t\t\t\t \r\n\t\t\t\t\t  {/* <Form.Item name=\"images\" label={<span><span style={{color:'#ff4d4f'}}>* </span>Upload Logo</span>} rules={[{ required: false, message: 'Field required!', }, ]}  >\r\n\t\t\t{imagesList.map((item,index)=>\r\n\t\t\t{\r\n\t\t\t\tconsole.log(item)\r\n\t\t\treturn <Avatar key={index} shape=\"square\" size={150} src={item.urls || item} style={{margin:5}} />\r\n\t\t\t }\r\n\t\t\t )}\r\n\t\t\t{imagesList.length>0?<br/>:''}\r\n\t\t\t<Button onClick={()=>setVisible(true)}> Upload Logo </Button>\r\n\t\t</Form.Item>\t\t */}\r\n<div className=\"mb-3\">\r\n{imagesList.map((item,index)=>\r\n\t\t\t{\r\n\t\t\t\tconsole.log(item)\r\n\t\t\treturn <Avatar key={index} shape=\"square\" size={80} src={item.urls || item} style={{marginBottom: '2px'}} />\r\n\t\t\t }\r\n\t\t\t )}\r\n\t\t\t{imagesList.length>0?<br/>:''}\r\n\t\t\t{imagesList.length>0?\t<Button className=\"upload_logo\" onClick={()=>setVisible(true)}> Edit Logo </Button>: \t<Button className=\"upload_logo\" onClick={()=>setVisible(true)}> Upload Logo </Button>}\r\n\r\n\t\t\r\n\r\n\r\n</div>\r\n\t\t\r\n\t\t\t\t\t  <Form.Item>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button mobile-register-form-button\"> Sign Up </Button> <br /><br />\r\n\t\t\t\t\t\tOr <span onClick={() => props.history.push('/')}><a href=\"#\" className=\"mobile-register-already\">Already have a account!</a></span>\r\n\t\t\t\t\t  </Form.Item>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t<UploadImages visible={visible} closeFun={()=>setVisible(false)} returnImg={val=> updateImageData(val)} resetVal={imagesList} aspect={9/12}/>\r\n\t\t\t\t</div>\r\n\t\t\t</Col>\r\n\t\t</Row> \r\n\t</div>\r\n  );\r\n};\r\n\r\nexport default connect(({ auth, loading }) => ({\r\n  auth, loading\r\n}))(AppRegister);\r\n"]},"metadata":{},"sourceType":"module"}