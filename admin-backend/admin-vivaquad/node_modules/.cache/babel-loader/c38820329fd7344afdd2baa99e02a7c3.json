{"ast":null,"code":"var _jsxFileName = \"/var/www/html/project/vivaquad/admin-vivaquad/src/pages/employees/action/addEdit.jsx\";\nimport React, { useState, useEffect, useRef, Fragment } from 'react';\nimport { Row, Col, Empty, Modal, Card, Typography, Alert, Form, Input, Checkbox, Button, Space, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, Avatar, message, InputNumber } from 'antd';\nimport { LeftOutlined, LoadingOutlined, MailOutlined, CloseOutlined, PlusOutlined, MinusCircleOutlined, MobileOutlined } from '@ant-design/icons';\nimport CropImage from '../../../components/sharing/crop-image';\nimport TextEditor from '../../../components/sharing/text-editor';\nimport moment from 'moment';\nimport { connect } from 'dva';\nimport MultiImageInput from 'react-multiple-image-input';\nconst dateFormat = 'MM/DD/YYYY';\nconst formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 24\n    }\n  }\n};\n\nconst AddEditEmployee = props => {\n  const [form] = Form.useForm();\n  let idAdd = props.match.params.id === undefined ? true : false;\n  const {\n    dispatch,\n    newsCategory\n  } = props;\n  const [visible, setVisible] = useState(false);\n  const [galleryVisible, setVisibleGallery] = useState(false);\n  const [imagesList, setImagesList] = useState([]);\n  const [gallaryImagesList, setGallaryImagesList] = useState([]);\n  const [catlist, setCatlist] = useState([]);\n  const [subcatlist, setSubCatlist] = useState([]);\n  const [productFeatures, setProductFeatures] = useState([]);\n  const [detail, setDetail] = useState({});\n  const [itemId, setItemId] = useState();\n  const [imageUrl, setImageUrl] = useState('');\n  const [picModel, setPicModel] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [InquiryData, setInquiryData] = useState('');\n  let [Inquiry, setInquiry] = useState('');\n  const [count, setCount] = useState(0);\n  const [ecount, setECount] = useState(0);\n  const [dcount, setDCount] = useState(0);\n  const [btnDis, setBtnDis] = useState(false);\n  const [colorImages, setColorImages] = useState({});\n  const [manageStock, setManageStock] = useState(false);\n  const [scheduleSale, setScheduleSale] = useState(false);\n  const [galleryImageUriList, setGalleryImageUriList] = useState({});\n  const [isManageStockCbk, setManageStockCbk] = useState(false);\n  useEffect(() => {\n    let unmounted = false;\n    window.scroll(0, 0);\n\n    if (props.match.params.id) {\n      setItemId(props.match.params.id);\n      DetailFun(props.match.params.id);\n    } else {\n      form.resetFields();\n      setImageUrl('');\n      setImagesList([]);\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [dispatch]);\n  useEffect(() => {\n    let unmounted = false; // setCatlist(newsCategory.list ? newsCategory.list.result : [])\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.users]);\n\n  const DetailFun = id => {\n    props.dispatch({\n      type: 'users/getDetail',\n      payload: {\n        _id: id,\n        profile_id: id\n      }\n    });\n  };\n\n  const convertToFormData = values => {\n    let user_id = localStorage.getItem('userId');\n    const formData = new FormData();\n    formData.append(\"avatar\", values.avatar);\n    formData.append(\"dob\", values.dob);\n    formData.append(\"email\", values.email);\n    formData.append(\"employee_type\", values.employee_type);\n    formData.append(\"mobile_number\", values.mobile_number);\n    formData.append(\"username\", values.username);\n    formData.append(\"user_id\", user_id);\n    return formData;\n  };\n\n  const onFinish = val => {\n    if (gallaryImagesList.length === 0) {\n      return message.error('please upload profile image');\n    }\n\n    val.avatar = gallaryImagesList[0];\n    const formData = convertToFormData(val);\n\n    if (props.match.params.id) {\n      formData.append('_id', props.match.params.id);\n      dispatch({\n        type: 'users/editEmployee',\n        payload: formData\n      });\n    } else {\n      dispatch({\n        type: 'users/addEmployee',\n        payload: formData\n      });\n    }\n  };\n\n  useEffect(() => {\n    let unmounted = false;\n    let add = props.users.add;\n\n    if (!unmounted && add.count > count && add && add.status) {\n      props.dispatch({\n        type: 'users/clearAction'\n      });\n      setBtnDis(false);\n      setImagesList([]);\n      cancelFun();\n      props.history.push('/employees');\n    } else if (!unmounted && add.count > count && add && !add.status) {\n      setBtnDis(false);\n      setCount(add.count);\n    } // Edit\n\n\n    let edit = props.users.edit;\n\n    if (!unmounted && edit.count > ecount && edit.status) {\n      props.dispatch({\n        type: 'users/clearAction'\n      });\n      setECount(edit.count);\n      setBtnDis(false);\n      setImagesList([]);\n      cancelFun();\n      props.history.push('/employees');\n    } else if (!unmounted && edit.count > ecount && !edit.status) {\n      setBtnDis(false);\n      setECount(edit.count);\n    } // detail\n\n\n    if (props.match.params.id) {\n      let detail = props.users.detail;\n\n      if (!unmounted && detail && detail.status) {\n        let data = detail.userLogin;\n        setDetail(data);\n        console.log(data);\n        form.setFieldsValue({\n          ['username']: data.username,\n          ['email']: data.email,\n          ['mobile_number']: data.mobile_number,\n          ['employee_type']: data.employee_type,\n          ['dob']: moment(new Date(data.dob) || null, dateFormat)\n        });\n        let images = [{\n          file: data.avatar\n        }];\n        console.log('images', images);\n        setGalleryImageUriList(images.map(galImg => {\n          return galImg.file;\n        }));\n        setGallaryImagesList(images.map(galImg => {\n          return galImg.file;\n        }));\n      } else if (!unmounted && detail && !detail.status) {\n        setBtnDis(false);\n        setDCount(detail.count);\n      }\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.users]);\n\n  const cancelFun = () => {\n    form.resetFields();\n    setImagesList([]);\n    props.history.push('/employees');\n  };\n\n  const dataURLtoFile = (dataurl, filename) => {\n    var arr = dataurl.split(','),\n        mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]),\n        n = bstr.length,\n        u8arr = new Uint8Array(n);\n\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n\n    return new File([u8arr], filename, {\n      type: mime\n    });\n  };\n\n  const onUploadGallery = data => {\n    const images = Object.values(data).map((image, i) => {\n      if (image.startsWith(process.env.REACT_APP_ApiUrl)) {\n        return image;\n      } else {\n        return dataURLtoFile(image, 'image_' + i);\n      }\n    });\n    setGalleryImageUriList(data);\n    setGallaryImagesList([...images]);\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    title: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(LeftOutlined, {\n      onClick: () => props.history.push('/employees'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 22\n      }\n    }), \" \", idAdd ? 'Add Employee' : 'Edit Employee'),\n    style: {\n      marginTop: \"0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Form, Object.assign({}, formItemLayout, {\n    form: form,\n    name: \"loc_info\",\n    layout: \"vertical\",\n    onFinish: onFinish,\n    className: \"innerFields\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 6,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 32\n      }\n    }, \"*\"), \"Profile Images\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MultiImageInput, {\n    images: galleryImageUriList,\n    setImages: onUploadGallery,\n    allowCrop: false,\n    theme: \"light\",\n    max: 1,\n    cropConfig: {\n      minWidth: 10,\n      maxWidth: 2000\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"username\",\n    label: \"Employee Name\",\n    rules: [{\n      required: true,\n      message: 'This field is required!'\n    }, {\n      max: 30,\n      message: 'Employee Name must not be greater than 30 characters.'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Employee Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 10\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"email\",\n    label: \"Email\",\n    rules: [{\n      required: true,\n      message: 'Please input your Email!'\n    }, {\n      type: 'email',\n      message: 'The input is not valid E-mail!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 8\n    }\n  }, idAdd ? /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(MailOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 23\n      }\n    }),\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(Input, {\n    disabled: true,\n    prefix: /*#__PURE__*/React.createElement(MailOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 31\n      }\n    }),\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }\n  })))))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"mobile_number\",\n    label: \"Mobile Number\",\n    rules: [{\n      required: true,\n      message: 'Please input your Mobile Number!'\n    }, {\n      pattern: /^[0-9]+$/,\n      message: 'Need to enter number'\n    }, {\n      len: 10,\n      message: 'Mobile number should be 10 digits long.'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 8\n    }\n  }, idAdd ? /*#__PURE__*/React.createElement(Input, {\n    type: \"tel\",\n    prefix: /*#__PURE__*/React.createElement(MobileOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 46\n      }\n    }),\n    placeholder: \"Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(Input, {\n    type: \"tel\",\n    disabled: true,\n    prefix: /*#__PURE__*/React.createElement(MobileOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 44\n      }\n    }),\n    placeholder: \"Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"employee_type\",\n    label: \"Employee Type\",\n    rules: [{\n      required: true,\n      message: 'This field is required!'\n    }, {\n      max: 30,\n      message: 'Employee Type must not be greater than 30 characters.'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Employee Type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 10\n    }\n  })))))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"dob\",\n    label: \"DOB\",\n    rules: [{\n      required: true,\n      message: 'Field required!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    disabledDate: current => {\n      let customDate = moment().format(\"YYYY-MM-DD\");\n      return current && current > moment(customDate, \"YYYY-MM-DD\");\n    },\n    format: \"YYYY-MM-DD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 8\n    }\n  })))))), /*#__PURE__*/React.createElement(Form.Item, {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: cancelFun,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 6\n    }\n  }, \"Cancel\"), \"\\xA0\\xA0\", /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    disabled: btnDis,\n    className: \"btn-w25 btn-primary-light\",\n    onClick: () => form.submit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 5\n    }\n  }, \"Save\"))));\n};\n\nexport default connect(_ref => {\n  let {\n    users\n  } = _ref;\n  return {\n    users: users,\n    global: global\n  };\n})(AddEditEmployee);","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/pages/employees/action/addEdit.jsx"],"names":["React","useState","useEffect","useRef","Fragment","Row","Col","Empty","Modal","Card","Typography","Alert","Form","Input","Checkbox","Button","Space","Upload","Dropdown","Menu","Select","notification","Transfer","DatePicker","Avatar","message","InputNumber","LeftOutlined","LoadingOutlined","MailOutlined","CloseOutlined","PlusOutlined","MinusCircleOutlined","MobileOutlined","CropImage","TextEditor","moment","connect","MultiImageInput","dateFormat","formItemLayout","labelCol","xs","span","sm","AddEditEmployee","props","form","useForm","idAdd","match","params","id","undefined","dispatch","newsCategory","visible","setVisible","galleryVisible","setVisibleGallery","imagesList","setImagesList","gallaryImagesList","setGallaryImagesList","catlist","setCatlist","subcatlist","setSubCatlist","productFeatures","setProductFeatures","detail","setDetail","itemId","setItemId","imageUrl","setImageUrl","picModel","setPicModel","loading","setLoading","InquiryData","setInquiryData","Inquiry","setInquiry","count","setCount","ecount","setECount","dcount","setDCount","btnDis","setBtnDis","colorImages","setColorImages","manageStock","setManageStock","scheduleSale","setScheduleSale","galleryImageUriList","setGalleryImageUriList","isManageStockCbk","setManageStockCbk","unmounted","window","scroll","DetailFun","resetFields","users","type","payload","_id","profile_id","convertToFormData","values","user_id","localStorage","getItem","formData","FormData","append","avatar","dob","email","employee_type","mobile_number","username","onFinish","val","length","error","add","status","cancelFun","history","push","edit","data","userLogin","console","log","setFieldsValue","Date","images","file","map","galImg","dataURLtoFile","dataurl","filename","arr","split","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","onUploadGallery","Object","image","i","startsWith","process","env","REACT_APP_ApiUrl","marginTop","color","minWidth","maxWidth","required","max","pattern","len","current","customDate","format","submit","global"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, Fragment } from 'react';\r\nimport { Row, Col, Empty, Modal, Card, Typography, Alert, Form, Input, Checkbox, Button, Space, Upload, Dropdown, Menu, Select, notification, Transfer, DatePicker, Avatar, message, InputNumber } from 'antd';\r\nimport { LeftOutlined, LoadingOutlined, MailOutlined, CloseOutlined, PlusOutlined, MinusCircleOutlined ,MobileOutlined } from '@ant-design/icons';\r\nimport CropImage from '../../../components/sharing/crop-image'\r\nimport TextEditor from '../../../components/sharing/text-editor'\r\nimport moment from 'moment';\r\nimport { connect } from 'dva';\r\nimport MultiImageInput from 'react-multiple-image-input';\r\nconst dateFormat = 'MM/DD/YYYY';\r\nconst formItemLayout = { labelCol: { xs: { span: 24, }, sm: { span: 24, }, } };\r\nconst AddEditEmployee = props => {\r\n\tconst [form] = Form.useForm();\r\n\tlet idAdd = props.match.params.id === undefined ? true : false\r\n\tconst { dispatch, newsCategory } = props;\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [galleryVisible,setVisibleGallery] = useState(false);\r\n\tconst [imagesList, setImagesList] = useState([]);\r\n\tconst [gallaryImagesList, setGallaryImagesList] = useState([]);\r\n\tconst [catlist, setCatlist] = useState([]);\r\n\tconst [subcatlist, setSubCatlist] = useState([]);\r\n\tconst [productFeatures, setProductFeatures] = useState([]);\r\n\tconst [detail, setDetail] = useState({});\r\n\tconst [itemId, setItemId] = useState()\r\n\tconst [imageUrl, setImageUrl] = useState('');\r\n\tconst [picModel, setPicModel] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [InquiryData, setInquiryData] = useState('');\r\n\tlet [Inquiry, setInquiry] = useState('');\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [ecount, setECount] = useState(0)\r\n\tconst [dcount, setDCount] = useState(0)\r\n\tconst [btnDis, setBtnDis] = useState(false)\r\n\tconst [colorImages, setColorImages] = useState({});\r\n\tconst [manageStock,setManageStock] = useState(false);\r\n\tconst [scheduleSale,setScheduleSale] = useState(false);\r\n\tconst [galleryImageUriList,setGalleryImageUriList] = useState({});\r\n    const [isManageStockCbk,setManageStockCbk] = useState(false);\r\n    \r\n\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tlet unmounted = false;\r\n\t\twindow.scroll(0, 0);\r\n\t\tif (props.match.params.id) {\r\n\t\t\tsetItemId(props.match.params.id)\t\t\t\r\n\t\t\tDetailFun(props.match.params.id)\r\n\t\t} else {\r\n\t\t\tform.resetFields();\r\n\t\t\tsetImageUrl('');\r\n\t\t\tsetImagesList([])\r\n\t\t}\r\n\t\treturn () => { unmounted = true; }\r\n\t}, [dispatch])\r\n\r\n\tuseEffect(() => {\r\n        let unmounted = false;\r\n   \t\t// setCatlist(newsCategory.list ? newsCategory.list.result : [])\r\n\r\n\t\treturn () => { unmounted = true; }\r\n\t}, [props.users])\r\n\r\n\tconst DetailFun = (id) => {\r\n\t\t\tprops.dispatch({type: 'users/getDetail', payload: { _id: id, profile_id: id }});\r\n\t}\r\n\r\n\tconst convertToFormData = (values) => {\r\n\t\tlet user_id = localStorage.getItem('userId');\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"avatar\",values.avatar)\r\n\t\tformData.append(\"dob\",values.dob)\r\n\t\tformData.append(\"email\",values.email)\r\n\t\tformData.append(\"employee_type\",values.employee_type)\r\n\t\tformData.append(\"mobile_number\",values.mobile_number)\r\n\t\tformData.append(\"username\",values.username)\r\n\t\tformData.append(\"user_id\",user_id)\t\r\n\t\treturn formData;\r\n\t}\r\n\r\n\tconst onFinish = val => {\r\n\t\tif(gallaryImagesList.length === 0) {\r\n\t\t  return\tmessage.error('please upload profile image');\r\n\t\t} \r\n\t\t\r\n\t\tval.avatar = gallaryImagesList[0];\r\n\t\tconst formData = convertToFormData(val);\r\n\r\n\r\n\t\t\r\n\t\tif (props.match.params.id) {\r\n\t\t\tformData.append('_id',props.match.params.id);\r\n\r\n\t\t\tdispatch({ type: 'users/editEmployee', payload: formData });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdispatch({ type: 'users/addEmployee', payload: formData });\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\t\r\n\t\tlet unmounted = false;\r\n\t\tlet add = props.users.add\r\n\t\tif (!unmounted && add.count > count && add && add.status) {\r\n            props.dispatch({ type: 'users/clearAction'});\r\n\t\t\tsetBtnDis(false);\r\n\t\t\tsetImagesList([]) \r\n\t\t\tcancelFun();\r\n\t\t\tprops.history.push('/employees');\r\n\t\t} else if (!unmounted && add.count > count && add && !add.status) {\r\n\t\t\tsetBtnDis(false);\r\n\t\t\tsetCount(add.count);\r\n\t\t}\r\n\r\n\t// Edit\r\n\t\tlet edit = props.users.edit \r\n\t\tif (!unmounted && edit.count > ecount && edit.status) {\r\n            props.dispatch({ type: 'users/clearAction'});\r\n\t\t\tsetECount(edit.count);\r\n\t\t\tsetBtnDis(false);\r\n\t\t\tsetImagesList([])\r\n\t\t\tcancelFun();\r\n\t\t\tprops.history.push('/employees');\r\n\t\t} else if (!unmounted && edit.count > ecount && !edit.status) {\r\n\t\t\tsetBtnDis(false);\r\n\t\t\tsetECount(edit.count);\r\n\t\t}\r\n\r\n\t\t// detail\r\n\t\tif (props.match.params.id) {\r\n\t\t\tlet detail = props.users.detail;\r\n\t\r\n\t\t\tif (!unmounted && detail && detail.status) {\r\n\t\t\t\tlet data = detail.userLogin;\r\n\t\t\t\tsetDetail(data)\r\n\r\n\t\t\t\tconsole.log(data)\r\n\r\n\r\n\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t ['username']: data.username, ['email']: data.email, ['mobile_number']: data.mobile_number,['employee_type']: data.employee_type,['dob']: moment(new Date(data.dob) || null, dateFormat)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet images = [{file : data.avatar }]\r\n\t\t\t\tconsole.log('images' , images)\r\n\t\t\t\tsetGalleryImageUriList(images.map((galImg) => {\r\n\t\t\t\t\treturn galImg.file;\r\n\t\t\t\t}));\r\n\t\t\t\tsetGallaryImagesList(images.map((galImg) => {\r\n\t\t\t\t\treturn galImg.file;\r\n\t\t\t\t}));\r\n\r\n\r\n\t\r\n\r\n\t\t\t} else if (!unmounted && detail && !detail.status) {\r\n\t\t\t\tsetBtnDis(false);\r\n\t\t\t\tsetDCount(detail.count);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn () => { unmounted = true; }\r\n\t\r\n\r\n\r\n\t}, [props.users])\r\n\r\n\tconst cancelFun = () => {\r\n\t\tform.resetFields();\r\n\t\tsetImagesList([])\r\n\t\tprops.history.push('/employees');\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t  const dataURLtoFile = (dataurl, filename) => {\r\n        var arr = dataurl.split(','),\r\n            mime = arr[0].match(/:(.*?);/)[1],\r\n            bstr = atob(arr[1]), \r\n            n = bstr.length, \r\n            u8arr = new Uint8Array(n);   \r\n        while(n--){\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new File([u8arr], filename, {type:mime});\r\n    }\r\n\t\r\n\t\r\n\t  const onUploadGallery = (data) => {\r\n\t\tconst images = Object.values(data).map((image,i) => {\r\n\t\t\tif(image.startsWith(process.env.REACT_APP_ApiUrl)) {\r\n\t\t\t\treturn image;\r\n\t\t\t}else{\r\n\t\t\t\treturn dataURLtoFile(image,'image_'+i);\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetGalleryImageUriList(data);\r\n\t\tsetGallaryImagesList([...images]);\r\n\t\t\r\n\t  }\r\n\r\n\t  \r\n\r\n\r\n\treturn (\r\n\t\t<Card title={<span><LeftOutlined onClick={() => props.history.push('/employees')} /> {idAdd ? 'Add Employee' : 'Edit Employee'}</span>} style={{ marginTop: \"0\" }}>\r\n\r\n\t\t\t<Form {...formItemLayout} form={form} name=\"loc_info\" layout=\"vertical\" onFinish={onFinish} className=\"innerFields\">\r\n\t\t\t<Row gutter={15}>\r\n\t\t\t\t<Col sm={6} md={6}>\r\n\t\t\t\t\t\t<Form.Item  label={<span><span style={{ color: 'red' }}>*</span>Profile Images</span>} >\r\n\t\t\t\t\t\t\t <MultiImageInput\r\n\t\t\t\t\t\t\t\t\timages={galleryImageUriList}\r\n\t\t\t\t\t\t\t\t\tsetImages={onUploadGallery}\r\n\t\t\t\t\t\t\t\t\tallowCrop = {false}\r\n\t\t\t\t\t\t\t\t\ttheme=\"light\"\r\n\t\t\t\t\t\t\t\t\tmax={1}\r\n\t\t\t\t\t\t\t\t\tcropConfig={{  minWidth: 10 , maxWidth: 2000  }}\r\n\t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\r\n\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\r\n\r\n\r\n\t\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"username\" label=\"Employee Name\" rules={[{ required: true, message: 'This field is required!' },{ max: 30, message: 'Employee Name must not be greater than 30 characters.' }]}  >\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"Employee Name\" />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"email\" label=\"Email\" rules={[\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\trequired: true, \r\n\t\t\t\t\t\t\t\tmessage: 'Please input your Email!'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\t\t\tmessage: 'The input is not valid E-mail!',\r\n\t\t\t\t\t\t\t}, \r\n\t\t\t\t\t\t]} >\r\n\t\t\t\t\t\t{idAdd ? \r\n\t\t\t\t\t\t\t<Input prefix={<MailOutlined className=\"site-form-item-icon\" />} placeholder=\"Email\" />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Input disabled prefix={<MailOutlined className=\"site-form-item-icon\" />} placeholder=\"Email\" />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  </Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"mobile_number\" label=\"Mobile Number\" rules={[ \r\n\t\t\t\t\t\t \t{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: 'Please input your Mobile Number!', \r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: /^[0-9]+$/,\r\n\t\t\t\t\t\t\t\tmessage: 'Need to enter number'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tlen: 10, \r\n\t\t\t\t\t\t\t\tmessage: 'Mobile number should be 10 digits long.' \r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]} >\r\n\r\n\t\t\t\t\t\t{idAdd ? \t<Input type=\"tel\"    prefix={<MobileOutlined className=\"site-form-item-icon\" />} placeholder=\"Mobile Number\" />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Input type=\"tel\" disabled   prefix={<MobileOutlined className=\"site-form-item-icon\" />} placeholder=\"Mobile Number\" />}\r\n\t\t\t\t\t\r\n\t\t\t\t\t  </Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"employee_type\" label=\"Employee Type\" rules={[{ required: true, message: 'This field is required!' },{ max: 30, message: 'Employee Type must not be greater than 30 characters.' }]}  >\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"Employee Type\" />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t<Col flex=\"auto\">\r\n\t\t\t\t\t\t<Row gutter={15}>\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t<Col sm={12} md={12}>\r\n\t\t\t\t\t\t\t<Form.Item name=\"dob\" label=\"DOB\" rules={[ { required: true, message: 'Field required!', }, ]} >\r\n\t\t\t\t\t\t\t<DatePicker  disabledDate={(current) => {\r\n              let customDate = moment().format(\"YYYY-MM-DD\");\r\n              return current && current > moment(customDate, \"YYYY-MM-DD\");\r\n            }}  format=\"YYYY-MM-DD\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Col>\r\n                           \r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t<Button onClick={cancelFun}>Cancel</Button>&nbsp;&nbsp;\r\n\t\t\t\t<Button type=\"primary\" disabled={btnDis} className=\"btn-w25 btn-primary-light\" onClick={() => form.submit()}>Save</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</Card>\r\n\t)\r\n};\r\n\r\nexport default connect(({users }) => ({\r\n\tusers:users,\r\n\tglobal: global\r\n\r\n}))(AddEditEmployee);"]},"metadata":{},"sourceType":"module"}