{"ast":null,"code":"import _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nvar SHOW = '@@DVA_LOADING/SHOW';\nvar HIDE = '@@DVA_LOADING/HIDE';\nvar NAMESPACE = 'loading';\n\nfunction createLoading() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var namespace = opts.namespace || NAMESPACE;\n  var _opts$only = opts.only,\n      only = _opts$only === void 0 ? [] : _opts$only,\n      _opts$except = opts.except,\n      except = _opts$except === void 0 ? [] : _opts$except;\n\n  if (only.length > 0 && except.length > 0) {\n    throw Error('It is ambiguous to configurate `only` and `except` items at the same time.');\n  }\n\n  var initialState = {\n    global: false,\n    models: {},\n    effects: {}\n  };\n\n  var extraReducers = _defineProperty({}, namespace, function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n\n    var _ref = arguments.length > 1 ? arguments[1] : undefined,\n        type = _ref.type,\n        payload = _ref.payload;\n\n    var _ref2 = payload || {},\n        namespace = _ref2.namespace,\n        actionType = _ref2.actionType;\n\n    var ret;\n\n    switch (type) {\n      case SHOW:\n        ret = _objectSpread({}, state, {\n          global: true,\n          models: _objectSpread({}, state.models, _defineProperty({}, namespace, true)),\n          effects: _objectSpread({}, state.effects, _defineProperty({}, actionType, true))\n        });\n        break;\n\n      case HIDE:\n        {\n          var effects = _objectSpread({}, state.effects, _defineProperty({}, actionType, false));\n\n          var models = _objectSpread({}, state.models, _defineProperty({}, namespace, Object.keys(effects).some(function (actionType) {\n            var _namespace = actionType.split('/')[0];\n            if (_namespace !== namespace) return false;\n            return effects[actionType];\n          })));\n\n          var global = Object.keys(models).some(function (namespace) {\n            return models[namespace];\n          });\n          ret = _objectSpread({}, state, {\n            global: global,\n            models: models,\n            effects: effects\n          });\n          break;\n        }\n\n      default:\n        ret = state;\n        break;\n    }\n\n    return ret;\n  });\n\n  function onEffect(effect, _ref3, model, actionType) {\n    var put = _ref3.put;\n    var namespace = model.namespace;\n\n    if (only.length === 0 && except.length === 0 || only.length > 0 && only.indexOf(actionType) !== -1 || except.length > 0 && except.indexOf(actionType) === -1) {\n      return /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return put({\n                  type: SHOW,\n                  payload: {\n                    namespace: namespace,\n                    actionType: actionType\n                  }\n                });\n\n              case 2:\n                _context.next = 4;\n                return effect.apply(void 0, _args);\n\n              case 4:\n                _context.next = 6;\n                return put({\n                  type: HIDE,\n                  payload: {\n                    namespace: namespace,\n                    actionType: actionType\n                  }\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      });\n    } else {\n      return effect;\n    }\n  }\n\n  return {\n    extraReducers: extraReducers,\n    onEffect: onEffect\n  };\n}\n\nexport default createLoading;","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/node_modules/dva-loading/dist/index.esm.js"],"names":["_regeneratorRuntime","_defineProperty","_objectSpread","SHOW","HIDE","NAMESPACE","createLoading","opts","arguments","length","undefined","namespace","_opts$only","only","_opts$except","except","Error","initialState","global","models","effects","extraReducers","state","_ref","type","payload","_ref2","actionType","ret","Object","keys","some","_namespace","split","onEffect","effect","_ref3","model","put","indexOf","mark","_callee","_args","wrap","_callee$","_context","prev","next","apply","stop"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\n\nvar SHOW = '@@DVA_LOADING/SHOW';\nvar HIDE = '@@DVA_LOADING/HIDE';\nvar NAMESPACE = 'loading';\n\nfunction createLoading() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var namespace = opts.namespace || NAMESPACE;\n  var _opts$only = opts.only,\n      only = _opts$only === void 0 ? [] : _opts$only,\n      _opts$except = opts.except,\n      except = _opts$except === void 0 ? [] : _opts$except;\n\n  if (only.length > 0 && except.length > 0) {\n    throw Error('It is ambiguous to configurate `only` and `except` items at the same time.');\n  }\n\n  var initialState = {\n    global: false,\n    models: {},\n    effects: {}\n  };\n\n  var extraReducers = _defineProperty({}, namespace, function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n\n    var _ref = arguments.length > 1 ? arguments[1] : undefined,\n        type = _ref.type,\n        payload = _ref.payload;\n\n    var _ref2 = payload || {},\n        namespace = _ref2.namespace,\n        actionType = _ref2.actionType;\n\n    var ret;\n\n    switch (type) {\n      case SHOW:\n        ret = _objectSpread({}, state, {\n          global: true,\n          models: _objectSpread({}, state.models, _defineProperty({}, namespace, true)),\n          effects: _objectSpread({}, state.effects, _defineProperty({}, actionType, true))\n        });\n        break;\n\n      case HIDE:\n        {\n          var effects = _objectSpread({}, state.effects, _defineProperty({}, actionType, false));\n\n          var models = _objectSpread({}, state.models, _defineProperty({}, namespace, Object.keys(effects).some(function (actionType) {\n            var _namespace = actionType.split('/')[0];\n            if (_namespace !== namespace) return false;\n            return effects[actionType];\n          })));\n\n          var global = Object.keys(models).some(function (namespace) {\n            return models[namespace];\n          });\n          ret = _objectSpread({}, state, {\n            global: global,\n            models: models,\n            effects: effects\n          });\n          break;\n        }\n\n      default:\n        ret = state;\n        break;\n    }\n\n    return ret;\n  });\n\n  function onEffect(effect, _ref3, model, actionType) {\n    var put = _ref3.put;\n    var namespace = model.namespace;\n\n    if (only.length === 0 && except.length === 0 || only.length > 0 && only.indexOf(actionType) !== -1 || except.length > 0 && except.indexOf(actionType) === -1) {\n      return (\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var _args = arguments;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return put({\n                    type: SHOW,\n                    payload: {\n                      namespace: namespace,\n                      actionType: actionType\n                    }\n                  });\n\n                case 2:\n                  _context.next = 4;\n                  return effect.apply(void 0, _args);\n\n                case 4:\n                  _context.next = 6;\n                  return put({\n                    type: HIDE,\n                    payload: {\n                      namespace: namespace,\n                      actionType: actionType\n                    }\n                  });\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        })\n      );\n    } else {\n      return effect;\n    }\n  }\n\n  return {\n    extraReducers: extraReducers,\n    onEffect: onEffect\n  };\n}\n\nexport default createLoading;\n"]},"metadata":{},"sourceType":"module"}