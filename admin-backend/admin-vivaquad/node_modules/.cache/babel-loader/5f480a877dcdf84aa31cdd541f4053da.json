{"ast":null,"code":"import _regeneratorRuntime from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Alert,Form,Input,Button,Typography,Popover,Tooltip}from'antd';import React,{useEffect,useState,Fragment,useRef}from'react';import{Link}from'react-router-dom';import{connect}from'dva';//import Apploader from './../../components/loader/loader'\n//import ErrorAlert from '@/components/CommonComp/AlertMessage';\nimport styles from'./style.less';var Text=Typography.Text;var ChangePassword=function ChangePassword(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState(0),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),fieldType=_useState4[0],setFieldType=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),charval=_useState8[0],setCharval=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),upperval=_useState10[0],setUpperval=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),lowerval=_useState12[0],setLowerval=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),numval=_useState14[0],setNumval=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),Scharval=_useState16[0],setScharval=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),TooltipShow=_useState18[0],setTooltipShow=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),confirm=_useState20[0],setConfirm=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),valid=_useState22[0],setValid=_useState22[1];//const fieldFocus = useRef();\nvar btnFocus=useRef();var dispatch=props.dispatch;var skipFun=function skipFun(e){if(valid)setValid(false);if(TooltipShow)setTooltipShow(false);if(confirm)setConfirm(false);form.resetFields();props.skip();};var onFinish=function onFinish(values){console.log();delete values[\"Cpassword\"];if(valid)setValid(false);if(TooltipShow)setTooltipShow(false);if(confirm)setConfirm(false);props.successCall(values);console.log(valid);console.log('working');};var checkPassword=function checkPassword(value){//console.log('checkpassword', value)\nvar pass=value;var special=/[^\\w\\s]/g;var capital=/^(?=\\S*[A-Z])/g;var number=/^(?=\\S*\\d)/g;var small=/^(?=\\S*[a-z])/g;var specChar=special.test(pass);if(value!==undefined){var showtooltip=number.test(pass)&&capital.test(pass)&&small.test(pass)&&specChar&&value.length>7&&value.length<17;setCharval(value.length>7&&value.length<17);setUpperval(capital.test(pass));setLowerval(small.test(pass));setNumval(number.test(pass));setScharval(specChar);if(showtooltip||value===''){setTooltipShow(false);if(value!==''){setValid(true);}return;}else{setTooltipShow(true);setValid(false);return Promise.reject('Please enter valid password!');}}else{setValid(false);return setTooltipShow(true);}// {callback();}\n//return Promise.reject('The two passwords that you entered do not match!');\n};useEffect(function(){var unmounted=false;//fieldFocus.current.focus();\n/*if(!unmounted &&  props.userLogin.login.count > 0){\r\n      //dispatch({ type: 'login/clearLogin'});\r\n    }*/return function(){unmounted=true;};},[dispatch]);var content=/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"h4\",null,\"Password Requirements\"),/*#__PURE__*/React.createElement(\"div\",{className:\"subcontent\"},/*#__PURE__*/React.createElement(\"p\",{className:charval?'active':''},\"8-16 Characters\"),/*#__PURE__*/React.createElement(\"p\",{className:upperval?'active':''},\"1 Uppercase Letter\"),/*#__PURE__*/React.createElement(\"p\",{className:lowerval?'active':''},\"1 Lowercase Letter\"),/*#__PURE__*/React.createElement(\"p\",{className:numval?'active':''},\"1 Number\"),/*#__PURE__*/React.createElement(\"p\",{className:Scharval?'active':''},\"1 Special Character\")));var suffixpass=valid?/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-check\",style:{color:'rgba(30, 202, 183, 1)'}}):/*#__PURE__*/React.createElement(\"i\",null);return/*#__PURE__*/React.createElement(Fragment,null,error,/*#__PURE__*/React.createElement(Form,{layout:\"vertical\",form:form,name:\"resetpass\",className:\"login-form\",onFinish:onFinish},!props.hideOldPass&&/*#__PURE__*/React.createElement(Form.Item,{name:\"oldPassword\",label:\"CURRENT PASSWORD\",rules:[{required:true,message:'Please confirm your password!'}]},/*#__PURE__*/React.createElement(Input,{type:'password',className:\"hasLeftPrefix\",prefix:/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-key\",name:\"key\"}),maxLength:\"16\",placeholder:\"Current Password\"})),/*#__PURE__*/React.createElement(Tooltip,{placement:\"right\",title:content,trigger:'focus',overlayClassName:\"intooltip\",visible:TooltipShow},/*#__PURE__*/React.createElement(Form.Item,{name:\"password\",label:\"NEW PASSWORD\",rules:[{required:true,message:'This field is required.'},{validator:function(){var _validator=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,value){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return checkPassword(value);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));function validator(_x,_x2){return _validator.apply(this,arguments);}return validator;}()}]//validateStatus={error ? \"error\": !TooltipShow?\"success\":'' }\n},/*#__PURE__*/React.createElement(Input,{type:fieldType?'text':'password',className:(valid?'hasEyeIcon':'')+' hasLeftPrefix',prefix:/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-key\",name:\"key\"}),placeholder:\"Password\"//autoFocus={true}\n//ref={fieldFocus}\n,maxLength:\"16\",suffix:suffixpass,onFocus:function onFocus(){return setTooltipShow(true);},onBlur:function onBlur(){return setTooltipShow(false);}}))),/*#__PURE__*/React.createElement(Form.Item,{name:\"Cpassword\",label:\"CONFIRM PASSWORD\",dependencies:['password']//validateStatus={error ? \"error\":''}\n,rules:[{required:true,message:'Please confirm your password!'},function(_ref){var getFieldValue=_ref.getFieldValue;return{validator:function validator(rule,value){if(!value){return Promise.reject('');}if(value&&getFieldValue('password')===value){if(getFieldValue('password')===value){setConfirm(true);//btnFocus.current.focus();\n}return Promise.resolve();}setConfirm(false);return Promise.reject('Passwords not match!');}};}]},/*#__PURE__*/React.createElement(Input,{type:fieldType?'text':'password',className:\"hasLeftPrefix hasEyeIcon\",prefix:/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-key\",name:\"key\"}),maxLength:\"16\",placeholder:\"Confirm Password\"})),/*#__PURE__*/React.createElement(Form.Item,{style:{textAlign:'right',margin:0}},props.cancelBtn&&/*#__PURE__*/React.createElement(Button,{onClick:skipFun},\"Cancel\"),\"\\xA0\",/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"btn-w25\",ref:btnFocus},props.buttonText?props.buttonText:\"Set Password\"))));};export default connect(function(_ref2){var loading=_ref2.loading;return{};})(ChangePassword);","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/components/sharing/change-password/index.jsx"],"names":["Alert","Form","Input","Button","Typography","Popover","Tooltip","React","useEffect","useState","Fragment","useRef","Link","connect","styles","Text","ChangePassword","props","useForm","form","count","setCount","fieldType","setFieldType","error","setError","charval","setCharval","upperval","setUpperval","lowerval","setLowerval","numval","setNumval","Scharval","setScharval","TooltipShow","setTooltipShow","confirm","setConfirm","valid","setValid","btnFocus","dispatch","skipFun","e","resetFields","skip","onFinish","values","console","log","successCall","checkPassword","value","pass","special","capital","number","small","specChar","test","undefined","showtooltip","length","Promise","reject","unmounted","content","suffixpass","color","hideOldPass","required","message","validator","_","getFieldValue","rule","resolve","textAlign","margin","cancelBtn","buttonText","loading"],"mappings":"yeAAA,OAASA,KAAT,CAAgBC,IAAhB,CAAsBC,KAAtB,CAA6BC,MAA7B,CAAqCC,UAArC,CAAiDC,OAAjD,CAA0DC,OAA1D,KAAyE,MAAzE,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,QAArC,CAA+CC,MAA/C,KAA6D,OAA7D,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,OAAT,KAAwB,KAAxB,CACA;AACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,GAAQC,CAAAA,IAAR,CAAiBX,UAAjB,CAAQW,IAAR,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,KAAK,CAAI,CAC9B,kBAAehB,IAAI,CAACiB,OAAL,EAAf,gDAAOC,IAAP,mBACA,cAA0BV,QAAQ,CAAC,CAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,eAAkCZ,QAAQ,CAAC,KAAD,CAA1C,yCAAOa,SAAP,eAAkBC,YAAlB,eACA,eAA0Bd,QAAQ,CAAC,KAAD,CAAlC,yCAAOe,KAAP,eAAcC,QAAd,eACA,eAA8BhB,QAAQ,CAAC,KAAD,CAAtC,yCAAOiB,OAAP,eAAgBC,UAAhB,eACA,eAAgClB,QAAQ,CAAC,KAAD,CAAxC,0CAAOmB,QAAP,gBAAiBC,WAAjB,gBACA,gBAAgCpB,QAAQ,CAAC,KAAD,CAAxC,2CAAOqB,QAAP,gBAAiBC,WAAjB,gBACA,gBAA4BtB,QAAQ,CAAC,KAAD,CAApC,2CAAOuB,MAAP,gBAAeC,SAAf,gBACA,gBAAgCxB,QAAQ,CAAC,KAAD,CAAxC,2CAAOyB,QAAP,gBAAiBC,WAAjB,gBACA,gBAAsC1B,QAAQ,CAAC,KAAD,CAA9C,2CAAO2B,WAAP,gBAAoBC,cAApB,gBACA,gBAA8B5B,QAAQ,CAAC,KAAD,CAAtC,2CAAO6B,OAAP,gBAAgBC,UAAhB,gBACA,gBAA0B9B,QAAQ,CAAC,KAAD,CAAlC,2CAAO+B,KAAP,gBAAcC,QAAd,gBACA;AACA,GAAMC,CAAAA,QAAQ,CAAG/B,MAAM,EAAvB,CACA,GAAQgC,CAAAA,QAAR,CAAqB1B,KAArB,CAAQ0B,QAAR,CAIA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,CAAD,CAAO,CACrB,GAAIL,KAAJ,CAAWC,QAAQ,CAAC,KAAD,CAAR,CACX,GAAIL,WAAJ,CAAiBC,cAAc,CAAC,KAAD,CAAd,CACjB,GAAIC,OAAJ,CAAaC,UAAU,CAAC,KAAD,CAAV,CACbpB,IAAI,CAAC2B,WAAL,GACA7B,KAAK,CAAC8B,IAAN,GACD,CAND,CAQA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,MAAM,CAAI,CAEzBC,OAAO,CAACC,GAAR,GACA,MAAOF,CAAAA,MAAM,CAAC,WAAD,CAAb,CACA,GAAIT,KAAJ,CAAWC,QAAQ,CAAC,KAAD,CAAR,CACX,GAAIL,WAAJ,CAAiBC,cAAc,CAAC,KAAD,CAAd,CACjB,GAAIC,OAAJ,CAAaC,UAAU,CAAC,KAAD,CAAV,CACbtB,KAAK,CAACmC,WAAN,CAAkBH,MAAlB,EACAC,OAAO,CAACC,GAAR,CAAYX,KAAZ,EACAU,OAAO,CAACC,GAAR,CAAY,SAAZ,EACD,CAVD,CAYA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAC/B;AAEA,GAAIC,CAAAA,IAAI,CAAGD,KAAX,CACA,GAAIE,CAAAA,OAAO,CAAG,UAAd,CACA,GAAIC,CAAAA,OAAO,CAAG,gBAAd,CACA,GAAIC,CAAAA,MAAM,CAAG,aAAb,CACA,GAAIC,CAAAA,KAAK,CAAG,gBAAZ,CACA,GAAIC,CAAAA,QAAQ,CAAGJ,OAAO,CAACK,IAAR,CAAaN,IAAb,CAAf,CAEA,GAAID,KAAK,GAAKQ,SAAd,CAAyB,CACvB,GAAIC,CAAAA,WAAW,CAAGL,MAAM,CAACG,IAAP,CAAYN,IAAZ,GAAqBE,OAAO,CAACI,IAAR,CAAaN,IAAb,CAArB,EAA2CI,KAAK,CAACE,IAAN,CAAWN,IAAX,CAA3C,EAA+DK,QAA/D,EAA2EN,KAAK,CAACU,MAAN,CAAe,CAA1F,EAA+FV,KAAK,CAACU,MAAN,CAAe,EAAhI,CAEArC,UAAU,CAAC2B,KAAK,CAACU,MAAN,CAAe,CAAf,EAAoBV,KAAK,CAACU,MAAN,CAAe,EAApC,CAAV,CACAnC,WAAW,CAAC4B,OAAO,CAACI,IAAR,CAAaN,IAAb,CAAD,CAAX,CACAxB,WAAW,CAAC4B,KAAK,CAACE,IAAN,CAAWN,IAAX,CAAD,CAAX,CACAtB,SAAS,CAACyB,MAAM,CAACG,IAAP,CAAYN,IAAZ,CAAD,CAAT,CACApB,WAAW,CAACyB,QAAD,CAAX,CAEA,GAAIG,WAAW,EAAIT,KAAK,GAAK,EAA7B,CAAiC,CAC/BjB,cAAc,CAAC,KAAD,CAAd,CACA,GAAIiB,KAAK,GAAK,EAAd,CAAkB,CAAEb,QAAQ,CAAC,IAAD,CAAR,CAAgB,CACpC,OACD,CAJD,IAIO,CACLJ,cAAc,CAAC,IAAD,CAAd,CACAI,QAAQ,CAAC,KAAD,CAAR,CACA,MAAOwB,CAAAA,OAAO,CAACC,MAAR,CAAe,8BAAf,CAAP,CACD,CACF,CAlBD,IAkBO,CACLzB,QAAQ,CAAC,KAAD,CAAR,CACA,MAAOJ,CAAAA,cAAc,CAAC,IAAD,CAArB,CACD,CAED;AACA;AACD,CAnCD,CAqCA7B,SAAS,CAAC,UAAM,CACd,GAAI2D,CAAAA,SAAS,CAAG,KAAhB,CACA;AACA;AACJ;AACA,OACI,MAAO,WAAM,CACXA,SAAS,CAAG,IAAZ,CACD,CAFD,CAGD,CATQ,CASN,CAACxB,QAAD,CATM,CAAT,CAWA,GAAMyB,CAAAA,OAAO,cACX,oBAAC,QAAD,mBACE,sDADF,cAEE,2BAAK,SAAS,CAAC,YAAf,eACE,yBAAG,SAAS,CAAE1C,OAAO,CAAG,QAAH,CAAc,EAAnC,oBADF,cAEE,yBAAG,SAAS,CAAEE,QAAQ,CAAG,QAAH,CAAc,EAApC,uBAFF,cAGE,yBAAG,SAAS,CAAEE,QAAQ,CAAG,QAAH,CAAc,EAApC,uBAHF,cAIE,yBAAG,SAAS,CAAEE,MAAM,CAAG,QAAH,CAAc,EAAlC,aAJF,cAKE,yBAAG,SAAS,CAAEE,QAAQ,CAAG,QAAH,CAAc,EAApC,wBALF,CAFF,CADF,CAYA,GAAMmC,CAAAA,UAAU,CAAG7B,KAAK,cAAG,yBAAG,SAAS,CAAE,cAAd,CAA8B,KAAK,CAAE,CAAE8B,KAAK,CAAE,uBAAT,CAArC,EAAH,cAAiF,6BAAzG,CAEA,mBAAQ,oBAAC,QAAD,MACL9C,KADK,cAEN,oBAAC,IAAD,EAAM,MAAM,CAAC,UAAb,CAAwB,IAAI,CAAEL,IAA9B,CAAoC,IAAI,CAAC,WAAzC,CAAqD,SAAS,CAAC,YAA/D,CAA4E,QAAQ,CAAE6B,QAAtF,EACG,CAAC/B,KAAK,CAACsD,WAAP,eACC,oBAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,aAAhB,CAA8B,KAAK,CAAC,kBAApC,CACE,KAAK,CAAE,CAAC,CAAEC,QAAQ,CAAE,IAAZ,CAAkBC,OAAO,CAAE,+BAA3B,CAAD,CADT,eAGE,oBAAC,KAAD,EAAO,IAAI,CAAE,UAAb,CAAyB,SAAS,CAAC,eAAnC,CACE,MAAM,cAAE,yBAAG,SAAS,CAAC,YAAb,CAA0B,IAAI,CAAC,KAA/B,EADV,CAEE,SAAS,CAAC,IAFZ,CAGE,WAAW,CAAC,kBAHd,EAHF,CAFJ,cAYE,oBAAC,OAAD,EAAS,SAAS,CAAC,OAAnB,CAA2B,KAAK,CAAEL,OAAlC,CAA2C,OAAO,CAAE,OAApD,CAA6D,gBAAgB,CAAC,WAA9E,CAA0F,OAAO,CAAEhC,WAAnG,eACE,oBAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,UAAhB,CAA2B,KAAK,CAAC,cAAjC,CACE,KAAK,CAAE,CAAC,CAAEoC,QAAQ,CAAE,IAAZ,CAAkBC,OAAO,CAAE,yBAA3B,CAAD,CACP,CACEC,SAAS,mFAAE,iBAAOC,CAAP,CAAUrB,KAAV,wIAA0BD,CAAAA,aAAa,CAACC,KAAD,CAAvC,6GAAF,2FADX,CADO,CAKT;AANA,eAQE,oBAAC,KAAD,EAAO,IAAI,CAAEhC,SAAS,CAAG,MAAH,CAAY,UAAlC,CAA8C,SAAS,CAAE,CAACkB,KAAK,CAAG,YAAH,CAAkB,EAAxB,EAA8B,gBAAvF,CAAyG,MAAM,cAAE,yBAAG,SAAS,CAAC,YAAb,CAA0B,IAAI,CAAC,KAA/B,EAAjH,CAA0J,WAAW,CAAC,UACpK;AACA;AAFF,CAGE,SAAS,CAAC,IAHZ,CAIE,MAAM,CAAE6B,UAJV,CAKE,OAAO,CAAE,yBAAMhC,CAAAA,cAAc,CAAC,IAAD,CAApB,EALX,CAME,MAAM,CAAE,wBAAMA,CAAAA,cAAc,CAAC,KAAD,CAApB,EANV,EARF,CADF,CAZF,cAgCE,oBAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,WAAhB,CAA4B,KAAK,CAAC,kBAAlC,CACE,YAAY,CAAE,CAAC,UAAD,CACd;AAFF,CAGE,KAAK,CAAE,CAAC,CAAEmC,QAAQ,CAAE,IAAZ,CAAkBC,OAAO,CAAE,+BAA3B,CAAD,CACP,kBAAGG,CAAAA,aAAH,MAAGA,aAAH,OAAwB,CACtBF,SADsB,oBACZG,IADY,CACNvB,KADM,CACC,CACrB,GAAI,CAACA,KAAL,CAAY,CACV,MAAOW,CAAAA,OAAO,CAACC,MAAR,CAAe,EAAf,CAAP,CACD,CACD,GAAIZ,KAAK,EAAIsB,aAAa,CAAC,UAAD,CAAb,GAA8BtB,KAA3C,CAAkD,CAChD,GAAIsB,aAAa,CAAC,UAAD,CAAb,GAA8BtB,KAAlC,CAAyC,CACvCf,UAAU,CAAC,IAAD,CAAV,CACA;AACD,CACD,MAAO0B,CAAAA,OAAO,CAACa,OAAR,EAAP,CACD,CACDvC,UAAU,CAAC,KAAD,CAAV,CACA,MAAO0B,CAAAA,OAAO,CAACC,MAAR,CAAe,sBAAf,CAAP,CACD,CAdqB,CAAxB,EADO,CAHT,eAsBE,oBAAC,KAAD,EAAO,IAAI,CAAE5C,SAAS,CAAG,MAAH,CAAY,UAAlC,CAA8C,SAAS,CAAC,0BAAxD,CACE,MAAM,cAAE,yBAAG,SAAS,CAAC,YAAb,CAA0B,IAAI,CAAC,KAA/B,EADV,CAEE,SAAS,CAAC,IAFZ,CAGE,WAAW,CAAC,kBAHd,EAtBF,CAhCF,cA2DE,oBAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAE,CAAEyD,SAAS,CAAE,OAAb,CAAsBC,MAAM,CAAE,CAA9B,CAAlB,EACG/D,KAAK,CAACgE,SAAN,eAAmB,oBAAC,MAAD,EAAQ,OAAO,CAAErC,OAAjB,WADtB,qBAKE,oBAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,CAAyC,SAAS,CAAC,SAAnD,CACE,GAAG,CAAEF,QADP,EAEGzB,KAAK,CAACiE,UAAN,CAAmBjE,KAAK,CAACiE,UAAzB,CAAsC,cAFzC,CALF,CA3DF,CAFM,CAAR,CA0ED,CA/KD,CAiLA,cAAerE,CAAAA,OAAO,CAAC,mBAAGsE,CAAAA,OAAH,OAAGA,OAAH,OAAkB,EAAlB,EAAD,CAAP,CAEXnE,cAFW,CAAf","sourcesContent":["import { Alert, Form, Input, Button, Typography, Popover, Tooltip } from 'antd';\r\nimport React, { useEffect, useState, Fragment, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'dva';\r\n//import Apploader from './../../components/loader/loader'\r\n//import ErrorAlert from '@/components/CommonComp/AlertMessage';\r\nimport styles from './style.less'\r\nconst { Text } = Typography;\r\n\r\nconst ChangePassword = props => {\r\n  const [form] = Form.useForm();\r\n  const [count, setCount] = useState(0);\r\n  const [fieldType, setFieldType] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [charval, setCharval] = useState(false);\r\n  const [upperval, setUpperval] = useState(false);\r\n  const [lowerval, setLowerval] = useState(false);\r\n  const [numval, setNumval] = useState(false);\r\n  const [Scharval, setScharval] = useState(false);\r\n  const [TooltipShow, setTooltipShow] = useState(false);\r\n  const [confirm, setConfirm] = useState(false);\r\n  const [valid, setValid] = useState(false);\r\n  //const fieldFocus = useRef();\r\n  const btnFocus = useRef();\r\n  const { dispatch } = props;\r\n\r\n\r\n\r\n  const skipFun = (e) => {\r\n    if (valid) setValid(false);\r\n    if (TooltipShow) setTooltipShow(false);\r\n    if (confirm) setConfirm(false);\r\n    form.resetFields();\r\n    props.skip();\r\n  }\r\n\r\n  const onFinish = values => {\r\n\r\n    console.log();\r\n    delete values[\"Cpassword\"];\r\n    if (valid) setValid(false);\r\n    if (TooltipShow) setTooltipShow(false);\r\n    if (confirm) setConfirm(false);\r\n    props.successCall(values);\r\n    console.log(valid);\r\n    console.log('working');\r\n  };\r\n\r\n  const checkPassword = (value) => {\r\n    //console.log('checkpassword', value)\r\n\r\n    var pass = value;\r\n    let special = /[^\\w\\s]/g;\r\n    let capital = /^(?=\\S*[A-Z])/g;\r\n    let number = /^(?=\\S*\\d)/g;\r\n    let small = /^(?=\\S*[a-z])/g;\r\n    let specChar = special.test(pass);\r\n\r\n    if (value !== undefined) {\r\n      let showtooltip = number.test(pass) && capital.test(pass) && small.test(pass) && specChar && value.length > 7 && value.length < 17;\r\n\r\n      setCharval(value.length > 7 && value.length < 17);\r\n      setUpperval(capital.test(pass));\r\n      setLowerval(small.test(pass));\r\n      setNumval(number.test(pass));\r\n      setScharval(specChar)\r\n\r\n      if (showtooltip || value === '') {\r\n        setTooltipShow(false)\r\n        if (value !== '') { setValid(true) }\r\n        return;\r\n      } else {\r\n        setTooltipShow(true)\r\n        setValid(false)\r\n        return Promise.reject('Please enter valid password!');\r\n      }\r\n    } else {\r\n      setValid(false);\r\n      return setTooltipShow(true)\r\n    }\r\n\r\n    // {callback();}\r\n    //return Promise.reject('The two passwords that you entered do not match!');\r\n  }\r\n\r\n  useEffect(() => {\r\n    let unmounted = false;\r\n    //fieldFocus.current.focus();\r\n    /*if(!unmounted &&  props.userLogin.login.count > 0){\r\n      //dispatch({ type: 'login/clearLogin'});\r\n    }*/\r\n    return () => {\r\n      unmounted = true;\r\n    }\r\n  }, [dispatch])\r\n\r\n  const content = (\r\n    <Fragment>\r\n      <h4>Password Requirements</h4>\r\n      <div className=\"subcontent\">\r\n        <p className={charval ? 'active' : ''}>8-16 Characters</p>\r\n        <p className={upperval ? 'active' : ''}>1 Uppercase Letter</p>\r\n        <p className={lowerval ? 'active' : ''}>1 Lowercase Letter</p>\r\n        <p className={numval ? 'active' : ''}>1 Number</p>\r\n        <p className={Scharval ? 'active' : ''}>1 Special Character</p>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n  const suffixpass = valid ? <i className={\"far fa-check\"} style={{ color: 'rgba(30, 202, 183, 1)' }} /> : <i />;\r\n\r\n  return (<Fragment>\r\n    {error}\r\n    <Form layout=\"vertical\" form={form} name=\"resetpass\" className=\"login-form\" onFinish={onFinish} >\r\n      {!props.hideOldPass &&\r\n        <Form.Item name=\"oldPassword\" label=\"CURRENT PASSWORD\"\r\n          rules={[{ required: true, message: 'Please confirm your password!' },]}\r\n        >\r\n          <Input type={'password'} className=\"hasLeftPrefix\"\r\n            prefix={<i className=\"fas fa-key\" name=\"key\" />}\r\n            maxLength=\"16\"\r\n            placeholder=\"Current Password\" />\r\n        </Form.Item>\r\n      }\r\n\r\n      <Tooltip placement=\"right\" title={content} trigger={'focus'} overlayClassName=\"intooltip\" visible={TooltipShow}>\r\n        <Form.Item name=\"password\" label=\"NEW PASSWORD\"\r\n          rules={[{ required: true, message: 'This field is required.' },\r\n          {\r\n            validator: async (_, value) => await checkPassword(value)\r\n          }\r\n          ]}\r\n        //validateStatus={error ? \"error\": !TooltipShow?\"success\":'' }\r\n        >\r\n          <Input type={fieldType ? 'text' : 'password'} className={(valid ? 'hasEyeIcon' : '') + ' hasLeftPrefix'} prefix={<i className=\"fas fa-key\" name=\"key\" />} placeholder=\"Password\"\r\n            //autoFocus={true}\r\n            //ref={fieldFocus}\r\n            maxLength=\"16\"\r\n            suffix={suffixpass}\r\n            onFocus={() => setTooltipShow(true)}\r\n            onBlur={() => setTooltipShow(false)}\r\n          />\r\n        </Form.Item>\r\n      </Tooltip>\r\n\r\n      <Form.Item name=\"Cpassword\" label=\"CONFIRM PASSWORD\"\r\n        dependencies={['password']}\r\n        //validateStatus={error ? \"error\":''}\r\n        rules={[{ required: true, message: 'Please confirm your password!' },\r\n        ({ getFieldValue }) => ({\r\n          validator(rule, value) {\r\n            if (!value) {\r\n              return Promise.reject('');\r\n            }\r\n            if (value && getFieldValue('password') === value) {\r\n              if (getFieldValue('password') === value) {\r\n                setConfirm(true);\r\n                //btnFocus.current.focus();\r\n              }\r\n              return Promise.resolve();\r\n            }\r\n            setConfirm(false)\r\n            return Promise.reject('Passwords not match!');\r\n          },\r\n        }),\r\n        ]}\r\n      >\r\n        <Input type={fieldType ? 'text' : 'password'} className=\"hasLeftPrefix hasEyeIcon\"\r\n          prefix={<i className=\"fas fa-key\" name=\"key\" />}\r\n          maxLength=\"16\"\r\n          placeholder=\"Confirm Password\" />\r\n      </Form.Item>\r\n      <Form.Item style={{ textAlign: 'right', margin: 0 }} >\r\n        {props.cancelBtn && <Button onClick={skipFun}>\r\n          Cancel\r\n          {/*props.cancelText ? props.cancelText : \"Cancel\"*/}\r\n        </Button>}&nbsp;\r\n        <Button type=\"primary\" htmlType=\"submit\" className=\"btn-w25\"\r\n          ref={btnFocus} >\r\n          {props.buttonText ? props.buttonText : \"Set Password\"}\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  </Fragment>\r\n  );\r\n};\r\n\r\nexport default connect(({ loading }) => ({\r\n\r\n}))(ChangePassword);\r\n"]},"metadata":{},"sourceType":"module"}