{"ast":null,"code":"import _slicedToArray from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Component,useEffect}from'react';import{Link}from'react-router-dom';import Apploader from'./../../components/loader/loader';import{connect}from'dva';import{Row,Col,Form,Input,Button,Checkbox,Card,Tabs,Divider,message}from'antd';import{UserOutlined,LockOutlined}from'@ant-design/icons';import ChangePassword from'./../../components/sharing/change-password';import VerifySellerForm from'./verify-seller-form';//import styles from './login.less';\nvar TabPane=Tabs.TabPane;var Setting=function Setting(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];var _useState3=useState('tab1'),_useState4=_slicedToArray(_useState3,2),key=_useState4[0],setKey=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),verifyForm=_useState6[0],setVerifyForm=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),itemList=_useState8[0],setItemList=_useState8[1];var role=localStorage.getItem('role');var userId=localStorage.getItem('userId');var dispatch=props.dispatch;useEffect(function(){var unmounted=false;if(role===\"SELLER\"){getDetail();}setTimeout(function(){return document.title='Setting';},100);dispatch({type:'setting/clearAction'});return function(){unmounted=true;};},[dispatch]);useEffect(function(){var unmounted=false;console.log(role);return function(){unmounted=true;};},[]);// const getDetail=()=> dispatch({ type: 'setting/getData' , });\nvar getDetail=function getDetail(){return dispatch({type:'account/getDetail',payload:{_id:userId,profile_id:userId}});};useEffect(function(){var unmounted=false;var getBus=props.setting.getBuss;if(!unmounted&&getBus&&getBus.status&&getBus.data){setVerifyForm(getBus);setItemList(getBus.data);}else if(!unmounted&&getBus&&!getBus.status){setVerifyForm({});}return function(){unmounted=true;};},[props.setting.getBuss]);var onTabChange=function onTabChange(key){setKey(key);};var verifyFormFun=function verifyFormFun(val){getDetail();};var changePass=function changePass(val){console.log('setting',val);dispatch({type:'setting/changePassword',payload:val});};useEffect(function(){var unmounted=false;var resetp=props.setting.resetp;if(!unmounted&&resetp.count>count&&resetp.status){setCount(resetp.count);// message.success('Password Changed successfully!');\nprops.history.push('/');// dispatch({ type: 'auth/logoutApp'})\n}return function(){unmounted=true;};},[props.setting.resetp]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Apploader,{show:props.loading.global}),/*#__PURE__*/React.createElement(Card,{style:{width:'100%'},title:\"SETTING\",bodyStyle:{padding:'0 20px 20px'}},/*#__PURE__*/React.createElement(Tabs,{defaultActiveKey:\"1\",onChange:onTabChange},/*#__PURE__*/React.createElement(TabPane,{tab:\"Change Password\",key:\"1\"},/*#__PURE__*/React.createElement(ChangePassword,Object.assign({},props,{successCall:function successCall(val){return changePass(val);},cancelBtn:true,skip:function skip(){return console.log('skip');}}))))));};export default connect(function(_ref){var setting=_ref.setting,auth=_ref.auth,loading=_ref.loading;return{setting:setting,auth:auth,loading:loading};})(Setting);","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/pages/setting/setting.js"],"names":["React","useState","Component","useEffect","Link","Apploader","connect","Row","Col","Form","Input","Button","Checkbox","Card","Tabs","Divider","message","UserOutlined","LockOutlined","ChangePassword","VerifySellerForm","TabPane","Setting","props","count","setCount","key","setKey","verifyForm","setVerifyForm","itemList","setItemList","role","localStorage","getItem","userId","dispatch","unmounted","getDetail","setTimeout","document","title","type","console","log","payload","_id","profile_id","getBus","setting","getBuss","status","data","onTabChange","verifyFormFun","val","changePass","resetp","history","push","loading","global","width","padding","auth"],"mappings":"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","sourcesContent":["import React, {useState, Component, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Apploader from './../../components/loader/loader'\r\nimport { connect } from 'dva';\r\nimport {Row, Col, Form, Input, Button, Checkbox, Card, Tabs, Divider, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport ChangePassword from './../../components/sharing/change-password';\r\nimport VerifySellerForm from './verify-seller-form';\r\n//import styles from './login.less';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst Setting = props => {\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [key, setKey] = useState('tab1')\r\n\tconst [verifyForm, setVerifyForm] = useState({})\r\n\tconst [itemList, setItemList] = useState([])\r\n\tconst role = localStorage.getItem('role')\r\n\tconst userId = localStorage.getItem('userId')\r\n\r\n\t\r\n\tconst { dispatch } = props;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tif(role === \"SELLER\"){getDetail()}\r\n\t\tsetTimeout(()=>document.title = 'Setting', 100);\r\n\t\tdispatch({type: 'setting/clearAction'})\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[dispatch])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false; \r\n\t\tconsole.log(role)\r\n\t\treturn () => {unmounted = true;}\r\n    },[])\r\n\t\r\n\t// const getDetail=()=> dispatch({ type: 'setting/getData' , });\r\n\tconst getDetail=()=> dispatch({ type: 'account/getDetail',  payload: { _id:userId, profile_id: userId },});\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet getBus = props.setting.getBuss;\t\t\r\n\t\tif(!unmounted && getBus && getBus.status && getBus.data){\r\n\t\t\tsetVerifyForm(getBus)\r\n\t\t\tsetItemList(getBus.data)\r\n\t\t}else if(!unmounted && getBus && !getBus.status){\r\n\t\t\tsetVerifyForm({})\r\n\t\t}\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[props.setting.getBuss])\r\n\t\r\n\tconst onTabChange=(key)=> { setKey(key);}\r\n\t\r\n\tconst verifyFormFun = val =>{\r\n\t\tgetDetail();\r\n\t}\r\n\tconst changePass = val =>{\r\n\t\tconsole.log('setting',val);\r\n\t\tdispatch({ type: 'setting/changePassword', payload: val})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet resetp = props.setting.resetp\r\n\t\tif(!unmounted && resetp.count > count && resetp.status){\r\n\t\t\tsetCount(resetp.count);\r\n\t\t\t// message.success('Password Changed successfully!');\r\n\t\t\tprops.history.push('/');\r\n\r\n\t\t\t// dispatch({ type: 'auth/logoutApp'})\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn () => {\tunmounted = true;}\r\n    },[props.setting.resetp])\r\n\t\r\n\r\n  return (\r\n\t<div>\r\n\t\t<Apploader show={props.loading.global}/>\r\n\t\t<Card style={{ width: '100%' }} title=\"SETTING\" bodyStyle={{padding:'0 20px 20px'}}>\r\n          <Tabs defaultActiveKey=\"1\" onChange={onTabChange}>\r\n\t\t\t<TabPane tab=\"Change Password\" key=\"1\">\r\n\t\t\t  <ChangePassword {...props} successCall={(val)=>changePass(val)} cancelBtn={true} skip={()=>console.log('skip')}/>\r\n\t\t\t  </TabPane>\r\n\t\t\t  {/* {role === \"SELLER\" && \r\n\t\t\t<TabPane tab=\"Business Verification\" key=\"2\">\r\n\t\t\t\t{verifyForm.isCreated > 0 ? <div style={{textAlign:'right', width:'100%'}}><Button type=\"primary\" className=\"btn-w25 btn-primary-light\" onClick={()=>props.history.push('/setting/business-verify')}>Add Business</Button></div>:''}\r\n\t\t\t\t\r\n\t\t\t\t{verifyForm.isCreated === 1 ? itemList.map((item,index)=><Row key={index}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<address>\r\n\t\t\t\t\t\t\t<strong>{item.storeName}</strong><br/>\r\n\t\t\t\t\t\t\t{item.address}<br/>\r\n\t\t\t\t\t\t\t<abbr title=\"Phone\">Phone:</abbr> {item.panNumber}<br/>\r\n\t\t\t\t\t\t\t<a href={\"mailto:\"+item.bemail}>{item.bemail}</a>\r\n\t\t\t\t\t\t  </address>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<address>\r\n\t\t\t\t\t\t<strong>Account Detail</strong><br/>\r\n\t\t\t\t\t\t<abbr title=\"Account\">AC:</abbr> {item.acNumber}<br/>\r\n\t\t\t\t\t\t<abbr title=\"Branch\">B:</abbr> {item.branch}<br/>\r\n\t\t\t\t\t\t<abbr title=\"IFSC\">IFSC:</abbr> {item.ifsc}<br/>\r\n\t\t\t\t\t  </address>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={24} md={24}>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t\t<address>\r\n\t\t\t\t\t\t\t\t<abbr>Account Verified by Admin:</abbr> <strong>{item.loginid.isBussinessVerified?'Yes':'No'}</strong>\r\n\t\t\t\t\t\t\t</address>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t\t<Button onClick={()=> props.history.push('/setting/business-verify/'+ item._id)}>Edit Business</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t  <Divider />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>): \r\n\t\t\t\t\t<div style={{textAlign:'center'}}>\r\n\t\t\t\t\t\t<p>Add your business detail for active you products</p>\r\n\t\t\t\t\t\t<Button type=\"primary\" className=\"btn-w25 btn-primary-light\" onClick={()=>props.history.push('/setting/business-verify')}>Add Business</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</TabPane>\r\n\t\t\t  } */}\r\n\t\t\t{/*<TabPane tab=\"Payments\" key=\"3\">\r\n\t\t\t  Content of Tab Pane 3\r\n\t\t\t</TabPane>*/}\r\n\t\t  </Tabs>\r\n        </Card>\r\n\t</div>\r\n  );\r\n};\r\n\r\nexport default connect(({setting, auth, loading}) => ({\r\n\tsetting, auth, loading\r\n}))(Setting);"]},"metadata":{},"sourceType":"module"}