{"ast":null,"code":"var _jsxFileName = \"/var/www/html/project/vivaquad/admin-vivaquad/src/pages/setting/setting.js\";\nimport React, { useState, Component, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport Apploader from './../../components/loader/loader';\nimport { connect } from 'dva';\nimport { Row, Col, Form, Input, Button, Checkbox, Card, Tabs, Divider, message } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport ChangePassword from './../../components/sharing/change-password';\nimport VerifySellerForm from './verify-seller-form'; //import styles from './login.less';\n\nconst {\n  TabPane\n} = Tabs;\n\nconst Setting = props => {\n  const [count, setCount] = useState(0);\n  const [key, setKey] = useState('tab1');\n  const [verifyForm, setVerifyForm] = useState({});\n  const [itemList, setItemList] = useState([]);\n  const role = localStorage.getItem('role');\n  const userId = localStorage.getItem('userId');\n  const {\n    dispatch\n  } = props;\n  useEffect(() => {\n    let unmounted = false;\n\n    if (role === \"SELLER\") {\n      getDetail();\n    }\n\n    setTimeout(() => document.title = 'Setting', 100);\n    dispatch({\n      type: 'setting/clearAction'\n    });\n    return () => {\n      unmounted = true;\n    };\n  }, [dispatch]);\n  useEffect(() => {\n    let unmounted = false;\n    console.log(role);\n    return () => {\n      unmounted = true;\n    };\n  }, []); // const getDetail=()=> dispatch({ type: 'setting/getData' , });\n\n  const getDetail = () => dispatch({\n    type: 'account/getDetail',\n    payload: {\n      _id: userId,\n      profile_id: userId\n    }\n  });\n\n  useEffect(() => {\n    let unmounted = false;\n    let getBus = props.setting.getBuss;\n\n    if (!unmounted && getBus && getBus.status && getBus.data) {\n      setVerifyForm(getBus);\n      setItemList(getBus.data);\n    } else if (!unmounted && getBus && !getBus.status) {\n      setVerifyForm({});\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.setting.getBuss]);\n\n  const onTabChange = key => {\n    setKey(key);\n  };\n\n  const verifyFormFun = val => {\n    getDetail();\n  };\n\n  const changePass = val => {\n    console.log('setting', val);\n    dispatch({\n      type: 'setting/changePassword',\n      payload: val\n    });\n  };\n\n  useEffect(() => {\n    let unmounted = false;\n    let resetp = props.setting.resetp;\n\n    if (!unmounted && resetp.count > count && resetp.status) {\n      setCount(resetp.count); // message.success('Password Changed successfully!');\n\n      props.history.push('/'); // dispatch({ type: 'auth/logoutApp'})\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, [props.setting.resetp]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Apploader, {\n    show: props.loading.global,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '100%'\n    },\n    title: \"SETTING\",\n    bodyStyle: {\n      padding: '0 20px 20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    defaultActiveKey: \"1\",\n    onChange: onTabChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Change Password\",\n    key: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(ChangePassword, Object.assign({}, props, {\n    successCall: val => changePass(val),\n    cancelBtn: true,\n    skip: () => console.log('skip'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 6\n    }\n  }))))));\n};\n\nexport default connect(_ref => {\n  let {\n    setting,\n    auth,\n    loading\n  } = _ref;\n  return {\n    setting,\n    auth,\n    loading\n  };\n})(Setting);","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/pages/setting/setting.js"],"names":["React","useState","Component","useEffect","Link","Apploader","connect","Row","Col","Form","Input","Button","Checkbox","Card","Tabs","Divider","message","UserOutlined","LockOutlined","ChangePassword","VerifySellerForm","TabPane","Setting","props","count","setCount","key","setKey","verifyForm","setVerifyForm","itemList","setItemList","role","localStorage","getItem","userId","dispatch","unmounted","getDetail","setTimeout","document","title","type","console","log","payload","_id","profile_id","getBus","setting","getBuss","status","data","onTabChange","verifyFormFun","val","changePass","resetp","history","push","loading","global","width","padding","auth"],"mappings":"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","sourcesContent":["import React, {useState, Component, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Apploader from './../../components/loader/loader'\r\nimport { connect } from 'dva';\r\nimport {Row, Col, Form, Input, Button, Checkbox, Card, Tabs, Divider, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport ChangePassword from './../../components/sharing/change-password';\r\nimport VerifySellerForm from './verify-seller-form';\r\n//import styles from './login.less';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst Setting = props => {\r\n\tconst [count, setCount] = useState(0)\r\n\tconst [key, setKey] = useState('tab1')\r\n\tconst [verifyForm, setVerifyForm] = useState({})\r\n\tconst [itemList, setItemList] = useState([])\r\n\tconst role = localStorage.getItem('role')\r\n\tconst userId = localStorage.getItem('userId')\r\n\r\n\t\r\n\tconst { dispatch } = props;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tif(role === \"SELLER\"){getDetail()}\r\n\t\tsetTimeout(()=>document.title = 'Setting', 100);\r\n\t\tdispatch({type: 'setting/clearAction'})\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[dispatch])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false; \r\n\t\tconsole.log(role)\r\n\t\treturn () => {unmounted = true;}\r\n    },[])\r\n\t\r\n\t// const getDetail=()=> dispatch({ type: 'setting/getData' , });\r\n\tconst getDetail=()=> dispatch({ type: 'account/getDetail',  payload: { _id:userId, profile_id: userId },});\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet getBus = props.setting.getBuss;\t\t\r\n\t\tif(!unmounted && getBus && getBus.status && getBus.data){\r\n\t\t\tsetVerifyForm(getBus)\r\n\t\t\tsetItemList(getBus.data)\r\n\t\t}else if(!unmounted && getBus && !getBus.status){\r\n\t\t\tsetVerifyForm({})\r\n\t\t}\r\n\t\t\r\n\t\treturn () => {\r\n\t\t\tunmounted = true;\r\n\t\t}\r\n    },[props.setting.getBuss])\r\n\t\r\n\tconst onTabChange=(key)=> { setKey(key);}\r\n\t\r\n\tconst verifyFormFun = val =>{\r\n\t\tgetDetail();\r\n\t}\r\n\tconst changePass = val =>{\r\n\t\tconsole.log('setting',val);\r\n\t\tdispatch({ type: 'setting/changePassword', payload: val})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tlet resetp = props.setting.resetp\r\n\t\tif(!unmounted && resetp.count > count && resetp.status){\r\n\t\t\tsetCount(resetp.count);\r\n\t\t\t// message.success('Password Changed successfully!');\r\n\t\t\tprops.history.push('/');\r\n\r\n\t\t\t// dispatch({ type: 'auth/logoutApp'})\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn () => {\tunmounted = true;}\r\n    },[props.setting.resetp])\r\n\t\r\n\r\n  return (\r\n\t<div>\r\n\t\t<Apploader show={props.loading.global}/>\r\n\t\t<Card style={{ width: '100%' }} title=\"SETTING\" bodyStyle={{padding:'0 20px 20px'}}>\r\n          <Tabs defaultActiveKey=\"1\" onChange={onTabChange}>\r\n\t\t\t<TabPane tab=\"Change Password\" key=\"1\">\r\n\t\t\t  <ChangePassword {...props} successCall={(val)=>changePass(val)} cancelBtn={true} skip={()=>console.log('skip')}/>\r\n\t\t\t  </TabPane>\r\n\t\t\t  {/* {role === \"SELLER\" && \r\n\t\t\t<TabPane tab=\"Business Verification\" key=\"2\">\r\n\t\t\t\t{verifyForm.isCreated > 0 ? <div style={{textAlign:'right', width:'100%'}}><Button type=\"primary\" className=\"btn-w25 btn-primary-light\" onClick={()=>props.history.push('/setting/business-verify')}>Add Business</Button></div>:''}\r\n\t\t\t\t\r\n\t\t\t\t{verifyForm.isCreated === 1 ? itemList.map((item,index)=><Row key={index}>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<address>\r\n\t\t\t\t\t\t\t<strong>{item.storeName}</strong><br/>\r\n\t\t\t\t\t\t\t{item.address}<br/>\r\n\t\t\t\t\t\t\t<abbr title=\"Phone\">Phone:</abbr> {item.panNumber}<br/>\r\n\t\t\t\t\t\t\t<a href={\"mailto:\"+item.bemail}>{item.bemail}</a>\r\n\t\t\t\t\t\t  </address>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t<address>\r\n\t\t\t\t\t\t<strong>Account Detail</strong><br/>\r\n\t\t\t\t\t\t<abbr title=\"Account\">AC:</abbr> {item.acNumber}<br/>\r\n\t\t\t\t\t\t<abbr title=\"Branch\">B:</abbr> {item.branch}<br/>\r\n\t\t\t\t\t\t<abbr title=\"IFSC\">IFSC:</abbr> {item.ifsc}<br/>\r\n\t\t\t\t\t  </address>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={24} md={24}>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t\t<address>\r\n\t\t\t\t\t\t\t\t<abbr>Account Verified by Admin:</abbr> <strong>{item.loginid.isBussinessVerified?'Yes':'No'}</strong>\r\n\t\t\t\t\t\t\t</address>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col sm={24} md={12}>\r\n\t\t\t\t\t\t\t<Button onClick={()=> props.history.push('/setting/business-verify/'+ item._id)}>Edit Business</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t  <Divider />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>): \r\n\t\t\t\t\t<div style={{textAlign:'center'}}>\r\n\t\t\t\t\t\t<p>Add your business detail for active you products</p>\r\n\t\t\t\t\t\t<Button type=\"primary\" className=\"btn-w25 btn-primary-light\" onClick={()=>props.history.push('/setting/business-verify')}>Add Business</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</TabPane>\r\n\t\t\t  } */}\r\n\t\t\t{/*<TabPane tab=\"Payments\" key=\"3\">\r\n\t\t\t  Content of Tab Pane 3\r\n\t\t\t</TabPane>*/}\r\n\t\t  </Tabs>\r\n        </Card>\r\n\t</div>\r\n  );\r\n};\r\n\r\nexport default connect(({setting, auth, loading}) => ({\r\n\tsetting, auth, loading\r\n}))(Setting);"]},"metadata":{},"sourceType":"module"}