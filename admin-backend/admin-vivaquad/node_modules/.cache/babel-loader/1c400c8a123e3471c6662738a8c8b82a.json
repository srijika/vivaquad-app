{"ast":null,"code":"import _regeneratorRuntime from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Apploader from'../../components/loader/loader';import{connect}from'dva';import{Card,Typography,Input,Button,Table,Row,Col,Popconfirm,Modal,message,Upload}from'antd';import{DeleteOutlined,EyeOutlined,CommentOutlined}from'@ant-design/icons';// import AddEdit from './action/addEdit'\nimport axios from'axios';var Search=Input.Search;var Text=Typography.Text;var baseUrl=process.env.REACT_APP_ApiUrl;var StudentList=/*#__PURE__*/function(_React$Component){_inherits(StudentList,_React$Component);var _super=_createSuper(StudentList);function StudentList(props){var _this;_classCallCheck(this,StudentList);_this=_super.call(this,props);_this.ListFun=function(){var search='page='+(_this.state.current-1)+\"&limit=\"+_this.state.limit+\"&inactive=\"+_this.state.inactive+\"&searchText=\"+_this.state.searchText+\"&sortBy=\"+_this.state.sortBy;localStorage.setItem('serviceSearch',JSON.stringify(_this.state));var user_id=localStorage.getItem('userId');var searchval={limit:_this.state.limit,role:\"STUDENT\",user_id:user_id};_this.props.dispatch({type:'users/getList',payload:searchval});};_this.ShowSizeChange=function(current,size){return _this.setState({limit:size},function(){return _this.ListFun();});};_this.switchFun=function(val){return _this.setState({inactive:val},function(){return _this.ListFun();});};_this.ChangeOrder=function(val){return _this.setState({sortBy:_this.state.sortBy==='asc'?'desc':'asc'},function(){return _this.ListFun();});};_this.paginationFun=function(val){return _this.setState({current:val.current},function(){return _this.ListFun();});};_this.searchVal=function(val){_this.state.searchText=val;var resultAutos=_this.props.users.list.data.filter(function(auto){return auto.username.toLowerCase().includes(val.toLowerCase())||auto.email.toLowerCase().includes(val.toLowerCase());});_this.setState({listData:resultAutos});};_this.deleteItem=function(id){var val={_id:id};_this.props.dispatch({type:'users/deleteItem',payload:val});};_this.handleDeactiveUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var list,list_update;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:list=_this.state.listData;console.log(\"list\",list);list_update=list.map(function(item){if(item._id===data){item.user_status=!item.user_status;}return item;});_this.setState({listData:list_update});_context.next=6;return axios.post(\"\".concat(baseUrl,\"/api/user/status\"),{id:data});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={limit:25,current:1,sortBy:'asc',addModel:false,inactive:false,searchText:'',loader:false,detail:'',count:0,listData:[]};setTimeout(function(){return document.title='Student List';},100);return _this;}_createClass(StudentList,[{key:\"componentDidMount\",value:function componentDidMount(){this.ListFun();}},{key:\"getSnapshotBeforeUpdate\",value:function getSnapshotBeforeUpdate(prevProps,prevState){var del=this.props.users.del;if(del.count>this.state.count&&del.status){this.setState({count:del.count,btndis:false});return true;}else if(del.count>this.state.count&&!del.status){this.setState({count:del.count,btndis:false});}return null;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(snapshot){this.ListFun();}}},{key:\"render\",value:function render(){var _this2=this;var searchText=this.state.searchText;var users=this.props.users;if(this.state.searchText==''){this.state.listData=users.list?users.list.data:[];}var columns=[{title:/*#__PURE__*/React.createElement(\"strong\",{className:\"primary-text cursor\",onClick:this.ChangeOrder},\"User Name \",/*#__PURE__*/React.createElement(\"i\",{className:' fal fa-sm '+(this.state.sortBy==='asc'?\"fa-long-arrow-up\":\"fa-long-arrow-down\")})),dataIndex:'username',render:function render(val,data){return/*#__PURE__*/React.createElement(\"div\",{className:data.isActive?\"\":'danger-text'},val);}},{title:/*#__PURE__*/React.createElement(\"strong\",null,\"Email\"),dataIndex:'email'},{title:/*#__PURE__*/React.createElement(\"strong\",null,\"Email Verified\"),dataIndex:'isEmailVerified',render:function render(val,data){return val?'Yes':'No';}},{title:/*#__PURE__*/React.createElement(\"strong\",null,\" Status \"),dataIndex:'user_status',render:function render(val,data){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Popconfirm,{title:\"Are you sure you want to \".concat(data.user_status?\"Activate\":\"Deactivate\",\" this user?\"),onConfirm:function onConfirm(e){_this2.handleDeactiveUser(data._id);},okText:\"Yes\",cancelText:\"No\"},/*#__PURE__*/React.createElement(Button,{type:\"default\"},data.user_status,\" \",data.user_status?\"Deactivate\":\"Activate\",\"  \")));}},{title:/*#__PURE__*/React.createElement(\"strong\",null,\"Action\"),width:150,//align:'center',\nrender:function render(val,data){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{type:\"default\",className:\"eye_btn\",onClick:function onClick(){_this2.props.history.push('/student/edit/'+data._id);}},/*#__PURE__*/React.createElement(EyeOutlined,null)),\"\\xA0\",/*#__PURE__*/React.createElement(Popconfirm,{title:\"Are you sure delete this user?\",onConfirm:function onConfirm(e){_this2.deleteItem(data._id);},okText:\"Yes\",cancelText:\"No\"},/*#__PURE__*/React.createElement(Button,{type:\"danger\"},/*#__PURE__*/React.createElement(DeleteOutlined,null))));}}];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Apploader,{show:this.props.loading.global}),/*#__PURE__*/React.createElement(Row,{className:\"TopActionBar\",gutter:[16,0],justify:\"space-between\",align:\"middle\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Search,{placeholder:\"Search...\",onChange:function onChange(e){return _this2.searchVal(e.target.value);},value:searchText,loading:this.props.submitting})),/*#__PURE__*/React.createElement(Col,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"innerContainer\"},/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"0\"},bodyStyle:{padding:'0 15px 15px'}},/*#__PURE__*/React.createElement(Table,{columns:columns,dataSource:this.state.listData,onChange:this.paginationFun,rowKey:function rowKey(record){return record._id;},pagination:{position:['bottomLeft'],showTotal:function showTotal(total,range){return/*#__PURE__*/React.createElement(Text,{type:\"secondary\"},\"Showing \".concat(range[0],\"-\").concat(range[1],\" of \").concat(total));},showSizeChanger:true,responsive:true,onShowSizeChange:function onShowSizeChange(current,size){return _this2.ShowSizeChange(current,size);},pageSizeOptions:['25','50','100','250','500']}}))));}}]);return StudentList;}(React.Component);;export default connect(function(_ref2){var users=_ref2.users,loading=_ref2.loading;return{users:users,loading:loading};})(StudentList);","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/pages/students/list.js"],"names":["React","Apploader","connect","Card","Typography","Input","Button","Table","Row","Col","Popconfirm","Modal","message","Upload","DeleteOutlined","EyeOutlined","CommentOutlined","axios","Search","Text","baseUrl","process","env","REACT_APP_ApiUrl","StudentList","props","ListFun","search","state","current","limit","inactive","searchText","sortBy","localStorage","setItem","JSON","stringify","user_id","getItem","searchval","role","dispatch","type","payload","ShowSizeChange","size","setState","switchFun","val","ChangeOrder","paginationFun","searchVal","resultAutos","users","list","data","filter","auto","username","toLowerCase","includes","email","listData","deleteItem","id","_id","handleDeactiveUser","console","log","list_update","map","item","user_status","post","addModel","loader","detail","count","setTimeout","document","title","prevProps","prevState","del","status","btndis","snapshot","columns","dataIndex","render","isActive","e","width","history","push","loading","global","target","value","submitting","marginTop","padding","record","position","showTotal","total","range","showSizeChanger","responsive","onShowSizeChange","pageSizeOptions","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Apploader from '../../components/loader/loader'\nimport { connect } from 'dva';\nimport { Card, Typography, Input, Button, Table,  Row, Col, Popconfirm, Modal, message, Upload} from 'antd';\nimport { DeleteOutlined, EyeOutlined  , CommentOutlined} from '@ant-design/icons';\n// import AddEdit from './action/addEdit'\nimport axios from 'axios';\nconst { Search } = Input;\nconst { Text } = Typography;\n\nconst baseUrl = process.env.REACT_APP_ApiUrl;\n\nclass StudentList extends React.Component { \n  constructor(props) {\n    super(props); \n\tthis.state = { limit:25, current:1, sortBy:'asc', addModel:false, inactive:false, searchText:'', loader:false, detail:'', count:0, listData: []}\n\tsetTimeout(()=>document.title = 'Student List', 100);\n  }\n\tcomponentDidMount(){\n\t\tthis.ListFun();\n\t}\n\t\n\tListFun=()=>{\n\t\tlet search = 'page='+(this.state.current-1)+\"&limit=\"+this.state.limit+\"&inactive=\"+this.state.inactive+\"&searchText=\"+this.state.searchText+\"&sortBy=\"+this.state.sortBy;\n\t\tlocalStorage.setItem('serviceSearch', JSON.stringify(this.state))\n        let user_id = localStorage.getItem('userId');\n\n       \n\t\tlet searchval = {limit:this.state.limit, role:\"STUDENT\" , user_id}\n\t\tthis.props.dispatch({type: 'users/getList',  payload: searchval,});\n\t  } \n  \n\tShowSizeChange=(current, size)  => this.setState({limit:size},()=>this.ListFun());\n\tswitchFun=(val)  => this.setState({inactive:val},()=>this.ListFun());\t\n\tChangeOrder=(val)  =>this.setState({sortBy: this.state.sortBy === 'asc' ? 'desc':'asc'},()=>this.ListFun());\n\tpaginationFun=(val)=> this.setState({current: val.current},()=>this.ListFun());\n\t\n\tsearchVal=(val)=>{\n\t\tthis.state.searchText = val\n\t\tconst resultAutos = this.props.users.list.data.filter((auto) => auto.username.toLowerCase().includes(val.toLowerCase()) || auto.email.toLowerCase().includes(val.toLowerCase()))\n\t\t\n\t\tthis.setState({ listData: resultAutos })\n\t}\n\t\n\t\n\tdeleteItem=(id)=>{\n\t\t\n\t\tlet val = {_id:id}\n\t\tthis.props.dispatch({type: 'users/deleteItem', payload: val});\n\t} \n\t\n\tgetSnapshotBeforeUpdate(prevProps, prevState) {\n\t\t\n\t\tlet del = this.props.users.del;\n        if ( del.count > this.state.count && del.status) {\n            this.setState({count:del.count, btndis:false})\n\t\t\treturn true\n        }else if ( del.count > this.state.count && !del.status) {\n\t\t\tthis.setState({count:del.count, btndis:false})\n\t\t}\n        return null;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (snapshot) {\n            this.ListFun();\n        }\n    }\n\t\n\thandleDeactiveUser = async (data) => {\n\t\tlet list = this.state.listData;\n\t\tconsole.log(\"list\" , list)\n\t\tlet list_update = list.map((item) => {\n\t\t\tif(item._id === data) {\n\t\t\t\titem.user_status = !item.user_status;\n\t\t\t}\n\t\t\treturn item;\t\n\t\t})\n\t\tthis.setState({ listData: list_update })\n\t\tawait axios.post(`${baseUrl}/api/user/status`, {id: data});\n\t}\n\n\t\n\trender(){\n\tconst { searchText, } = this.state;\n\tconst {users} = this.props;\n\t\n\tif(this. state.searchText == '') {\n\t this.state.listData = users.list ? users.list.data:[];\n\t}\n\n\tconst columns = [\n\t  {\n\t\ttitle: <strong className=\"primary-text cursor\" onClick={this.ChangeOrder}>User Name <i className={' fal fa-sm '+(this.state.sortBy === 'asc'? \"fa-long-arrow-up\":\"fa-long-arrow-down\")} ></i></strong>,\n\t\tdataIndex: 'username',\n\t\n\t\trender:(val,data)=> <div className={data.isActive ?\"\":'danger-text'}>{val}</div>\n\t  },\n\t  { title:<strong>Email</strong>, dataIndex: 'email',},\n\t  { title:<strong>Email Verified</strong>, dataIndex: 'isEmailVerified', render:(val,data)=> val?'Yes':'No'},\n\t  { title:<strong> Status </strong>, dataIndex: 'user_status', render:(val,data)=> \n\n\t  <div>\n\t\n\t\t <Popconfirm title={`Are you sure you want to ${data.user_status ? \"Activate\" : \"Deactivate\"} this user?`} onConfirm={e=> {this.handleDeactiveUser(data._id)}} okText=\"Yes\" cancelText=\"No\" >\n\t\t\t <Button type=\"default\" >{data.user_status} {data.user_status ? \"Deactivate\" : \"Activate\"}  </Button>\n\t\t </Popconfirm> \n\t  </div>\n },\n\n\t  { title:<strong>Action</strong>, width:150, //align:'center',\n\t\trender:(val,data)=> \n\t\t<div>\n\t\t\t\n\t\t<Button type=\"default\" className=\"eye_btn\" onClick={()=>{\n\t\t\tthis.props.history.push('/student/edit/'+data._id)}}><EyeOutlined /></Button>&nbsp;\n\t\t<Popconfirm title=\"Are you sure delete this user?\" onConfirm={e=> {this.deleteItem(data._id)}} okText=\"Yes\" cancelText=\"No\" >\n\t\t<Button type=\"danger\" ><DeleteOutlined /></Button>\n\t  </Popconfirm>\n\t  </div>\n\t  },\n\t];\n  return (\n\t<div>\n\t\t<Apploader show={this.props.loading.global}/>\n\t\t<Row className=\"TopActionBar\" gutter={[16,0]} justify=\"space-between\" align=\"middle\">\n\t\t\t<Col>\n\t\t\t\t<Search placeholder=\"Search...\" onChange={(e)=>this.searchVal(e.target.value)} value={searchText}\n\t\t\t\tloading={this.props.submitting}\t/>\n\t\t\t</Col>\n\t\t\t<Col>\n\t\t\t</Col>\n\n\t\t\n\t\t</Row>\n\t\t\n\t\t<div className=\"innerContainer\">\n\t\t\t\t<Card style={{marginTop:\"0\"}} bodyStyle={{padding:'0 15px 15px'}}>\n\t\t\t\t  <Table columns={columns} dataSource={this.state.listData} \n\t\t\t\t\tonChange={this.paginationFun}\n\t\t\t\t\trowKey={record => record._id}\n\t\t\t\t\tpagination={{position: ['bottomLeft'], \n\t\t\t\t\t\tshowTotal:(total, range) => <Text type=\"secondary\">{`Showing ${range[0]}-${range[1]} of ${total}`}</Text>, showSizeChanger:true,\n\t\t\t\t\t\tresponsive:true,\n\t\t\t\t\t\tonShowSizeChange:(current, size)=> this.ShowSizeChange(current, size),\n\t\t\t\t\t\tpageSizeOptions:['25','50','100','250','500'],\n\t\t\t\t\t}}\n\t\t\t\t  />\n\t\t\t\t</Card>\n\t\t\t</div>\n\t</div>\n  );\n\t}\n};\n\nexport default connect(({users, loading}) => ({\n\tusers, loading\n}))(StudentList);"]},"metadata":{},"sourceType":"module"}