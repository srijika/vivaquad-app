{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.run = run;\nexports.unlisten = unlisten;\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime/core-js/get-iterator\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _utils = require(\"./utils\");\n\nvar _prefixedDispatch = _interopRequireDefault(require(\"./prefixedDispatch\"));\n\nfunction run(subs, model, app, onError) {\n  var funcs = [];\n  var nonFuncs = [];\n\n  for (var key in subs) {\n    if (Object.prototype.hasOwnProperty.call(subs, key)) {\n      var sub = subs[key];\n      var unlistener = sub({\n        dispatch: (0, _prefixedDispatch.default)(app._store.dispatch, model),\n        history: app._history\n      }, onError);\n\n      if ((0, _utils.isFunction)(unlistener)) {\n        funcs.push(unlistener);\n      } else {\n        nonFuncs.push(key);\n      }\n    }\n  }\n\n  return {\n    funcs: funcs,\n    nonFuncs: nonFuncs\n  };\n}\n\nfunction unlisten(unlisteners, namespace) {\n  if (!unlisteners[namespace]) return;\n  var _unlisteners$namespac = unlisteners[namespace],\n      funcs = _unlisteners$namespac.funcs,\n      nonFuncs = _unlisteners$namespac.nonFuncs;\n  (0, _warning.default)(nonFuncs.length === 0, \"[app.unmodel] subscription should return unlistener function, check these subscriptions \".concat(nonFuncs.join(', ')));\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (0, _getIterator2.default)(funcs), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var unlistener = _step.value;\n      unlistener();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  delete unlisteners[namespace];\n}","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/node_modules/dva-core/lib/subscription.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","run","unlisten","_getIterator2","_warning","_utils","_prefixedDispatch","subs","model","app","onError","funcs","nonFuncs","key","prototype","hasOwnProperty","call","sub","unlistener","dispatch","default","_store","history","_history","isFunction","push","unlisteners","namespace","_unlisteners$namespac","length","concat","join","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","_step","next","done","err","return"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.run = run;\nexports.unlisten = unlisten;\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime/core-js/get-iterator\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _utils = require(\"./utils\");\n\nvar _prefixedDispatch = _interopRequireDefault(require(\"./prefixedDispatch\"));\n\nfunction run(subs, model, app, onError) {\n  var funcs = [];\n  var nonFuncs = [];\n\n  for (var key in subs) {\n    if (Object.prototype.hasOwnProperty.call(subs, key)) {\n      var sub = subs[key];\n      var unlistener = sub({\n        dispatch: (0, _prefixedDispatch.default)(app._store.dispatch, model),\n        history: app._history\n      }, onError);\n\n      if ((0, _utils.isFunction)(unlistener)) {\n        funcs.push(unlistener);\n      } else {\n        nonFuncs.push(key);\n      }\n    }\n  }\n\n  return {\n    funcs: funcs,\n    nonFuncs: nonFuncs\n  };\n}\n\nfunction unlisten(unlisteners, namespace) {\n  if (!unlisteners[namespace]) return;\n  var _unlisteners$namespac = unlisteners[namespace],\n      funcs = _unlisteners$namespac.funcs,\n      nonFuncs = _unlisteners$namespac.nonFuncs;\n  (0, _warning.default)(nonFuncs.length === 0, \"[app.unmodel] subscription should return unlistener function, check these subscriptions \".concat(nonFuncs.join(', ')));\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (0, _getIterator2.default)(funcs), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var unlistener = _step.value;\n      unlistener();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  delete unlisteners[namespace];\n}"]},"metadata":{},"sourceType":"script"}