{"ast":null,"code":"function __$styleInject(css) {\n  if (!css) return;\n  if (typeof window == 'undefined') return;\n  var style = document.createElement('style');\n  style.setAttribute('media', 'screen');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  return css;\n}\n\nimport _asyncToGenerator from '@babel/runtime/helpers/esm/asyncToGenerator';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport React, { forwardRef, useState, useCallback, useRef, useMemo } from 'react';\nimport t from 'prop-types';\nimport Cropper from 'react-easy-crop';\nimport LocaleReceiver from 'antd/es/locale-provider/LocaleReceiver';\nimport Modal from 'antd/es/modal';\nimport Slider from 'antd/es/slider';\n\n__$styleInject(\".antd-img-crop-modal .ant-modal-body {\\n  padding-bottom: 16px;\\n}\\n.antd-img-crop-modal .antd-img-crop-container {\\n  position: relative;\\n  width: 100%;\\n  height: 40vh;\\n  margin-bottom: 16px;\\n}\\n.antd-img-crop-modal .antd-img-crop-control {\\n  display: flex;\\n  align-items: center;\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.antd-img-crop-modal .antd-img-crop-control button {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 34px;\\n  height: 34px;\\n  padding: 0;\\n  font-style: normal;\\n  background: transparent;\\n  border: 0;\\n  outline: 0;\\n  cursor: pointer;\\n}\\n.antd-img-crop-modal .antd-img-crop-control button[disabled] {\\n  cursor: default;\\n}\\n.antd-img-crop-modal .antd-img-crop-control.zoom button {\\n  font-size: 18px;\\n}\\n.antd-img-crop-modal .antd-img-crop-control.rotate button {\\n  font-size: 16px;\\n}\\n.antd-img-crop-modal .antd-img-crop-control.rotate button:first-of-type {\\n  transform: rotate(-20deg);\\n}\\n.antd-img-crop-modal .antd-img-crop-control.rotate button:last-of-type {\\n  transform: rotate(20deg);\\n}\\n.antd-img-crop-modal .antd-img-crop-control .ant-slider {\\n  flex: 1;\\n  margin: 0 8px;\\n}\\n\");\n\nvar _excluded = [\"beforeUpload\", \"accept\"];\nvar pkg = 'antd-img-crop';\n\nvar noop = function noop() {};\n\nvar MEDIA_CLASS = pkg + \"-media\";\nvar ZOOM_STEP = 0.1;\nvar MIN_ROTATE = 0;\nvar MAX_ROTATE = 360;\nvar ROTATE_STEP = 1;\nvar EasyCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var src = props.src,\n      aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      hasZoom = props.hasZoom,\n      zoomVal = props.zoomVal,\n      rotateVal = props.rotateVal,\n      setZoomVal = props.setZoomVal,\n      setRotateVal = props.setRotateVal,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      onComplete = props.onComplete,\n      cropperProps = props.cropperProps;\n\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      crop = _useState[0],\n      setCrop = _useState[1];\n\n  var _useState2 = useState({\n    width: 0,\n    height: 0\n  }),\n      cropSize = _useState2[0],\n      setCropSize = _useState2[1];\n\n  var onCropComplete = useCallback(function (croppedArea, croppedAreaPixels) {\n    onComplete(croppedAreaPixels);\n  }, [onComplete]);\n  var onMediaLoaded = useCallback(function (mediaSize) {\n    var width = mediaSize.width,\n        height = mediaSize.height;\n    var ratioWidth = height * aspect;\n\n    if (width > ratioWidth) {\n      setCropSize({\n        width: ratioWidth,\n        height: height\n      });\n    } else {\n      setCropSize({\n        width: width,\n        height: width / aspect\n      });\n    }\n  }, [aspect]);\n  return /*#__PURE__*/React.createElement(Cropper, Object.assign({}, cropperProps, {\n    ref: ref,\n    image: src,\n    crop: crop,\n    cropSize: cropSize,\n    onCropChange: setCrop,\n    aspect: aspect,\n    cropShape: shape,\n    showGrid: grid,\n    zoomWithScroll: hasZoom,\n    zoom: zoomVal,\n    rotation: rotateVal,\n    onZoomChange: setZoomVal,\n    onRotationChange: setRotateVal,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    onCropComplete: onCropComplete,\n    onMediaLoaded: onMediaLoaded,\n    classes: {\n      containerClassName: pkg + \"-container\",\n      mediaClassName: MEDIA_CLASS\n    }\n  }));\n});\nEasyCrop.propTypes = {\n  src: t.string,\n  aspect: t.number,\n  shape: t.string,\n  grid: t.bool,\n  hasZoom: t.bool,\n  zoomVal: t.number,\n  rotateVal: t.number,\n  setZoomVal: t.func,\n  setRotateVal: t.func,\n  minZoom: t.number,\n  maxZoom: t.number,\n  onComplete: t.func,\n  cropperProps: t.object\n};\nvar ImgCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      quality = props.quality,\n      zoom = props.zoom,\n      rotate = props.rotate,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      fillColor = props.fillColor,\n      modalTitle = props.modalTitle,\n      modalWidth = props.modalWidth,\n      modalOk = props.modalOk,\n      modalCancel = props.modalCancel,\n      beforeCrop = props.beforeCrop,\n      children = props.children,\n      cropperProps = props.cropperProps;\n  var hasZoom = zoom === true;\n  var hasRotate = rotate === true;\n\n  var _useState3 = useState(''),\n      src = _useState3[0],\n      setSrc = _useState3[1];\n\n  var _useState4 = useState(1),\n      zoomVal = _useState4[0],\n      setZoomVal = _useState4[1];\n\n  var _useState5 = useState(0),\n      rotateVal = _useState5[0],\n      setRotateVal = _useState5[1];\n\n  var beforeUploadRef = useRef();\n  var fileRef = useRef();\n  var resolveRef = useRef(noop);\n  var rejectRef = useRef(noop);\n  var cropPixelsRef = useRef();\n  /**\n   * Upload\n   */\n\n  var renderUpload = useCallback(function () {\n    var upload = Array.isArray(children) ? children[0] : children;\n\n    var _upload$props = upload.props,\n        beforeUpload = _upload$props.beforeUpload,\n        accept = _upload$props.accept,\n        restUploadProps = _objectWithoutPropertiesLoose(_upload$props, _excluded);\n\n    beforeUploadRef.current = beforeUpload;\n    return _extends({}, upload, {\n      props: _extends({}, restUploadProps, {\n        accept: accept || 'image/*',\n        beforeUpload: function beforeUpload(file, fileList) {\n          return new Promise( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n              var reader;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.t0 = beforeCrop;\n\n                      if (!_context.t0) {\n                        _context.next = 5;\n                        break;\n                      }\n\n                      _context.next = 4;\n                      return beforeCrop(file, fileList);\n\n                    case 4:\n                      _context.t0 = !_context.sent;\n\n                    case 5:\n                      if (!_context.t0) {\n                        _context.next = 8;\n                        break;\n                      }\n\n                      reject();\n                      return _context.abrupt(\"return\");\n\n                    case 8:\n                      fileRef.current = file;\n                      resolveRef.current = resolve;\n                      rejectRef.current = reject;\n                      reader = new FileReader();\n                      reader.addEventListener('load', function () {\n                        setSrc(reader.result);\n                      });\n                      reader.readAsDataURL(file);\n\n                    case 14:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x, _x2) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        }\n      })\n    });\n  }, [beforeCrop, children]);\n  /**\n   * EasyCrop\n   */\n\n  var onComplete = useCallback(function (croppedAreaPixels) {\n    cropPixelsRef.current = croppedAreaPixels;\n  }, []);\n  /**\n   * Controls\n   */\n\n  var isMinZoom = zoomVal - ZOOM_STEP < minZoom;\n  var isMaxZoom = zoomVal + ZOOM_STEP > maxZoom;\n  var isMinRotate = rotateVal === MIN_ROTATE;\n  var isMaxRotate = rotateVal === MAX_ROTATE;\n  var subZoomVal = useCallback(function () {\n    if (!isMinZoom) setZoomVal(zoomVal - ZOOM_STEP);\n  }, [isMinZoom, zoomVal]);\n  var addZoomVal = useCallback(function () {\n    if (!isMaxZoom) setZoomVal(zoomVal + ZOOM_STEP);\n  }, [isMaxZoom, zoomVal]);\n  var subRotateVal = useCallback(function () {\n    if (!isMinRotate) setRotateVal(rotateVal - ROTATE_STEP);\n  }, [isMinRotate, rotateVal]);\n  var addRotateVal = useCallback(function () {\n    if (!isMaxRotate) setRotateVal(rotateVal + ROTATE_STEP);\n  }, [isMaxRotate, rotateVal]);\n  /**\n   * Modal\n   */\n\n  var modalProps = useMemo(function () {\n    var obj = {\n      width: modalWidth,\n      okText: modalOk,\n      cancelText: modalCancel\n    };\n    Object.keys(obj).forEach(function (key) {\n      if (!obj[key]) delete obj[key];\n    });\n    return obj;\n  }, [modalCancel, modalOk, modalWidth]);\n  var onClose = useCallback(function () {\n    setSrc('');\n    setZoomVal(1);\n    setRotateVal(0);\n  }, []);\n  var onOk = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var naturalImg, naturalWidth, naturalHeight, canvas, ctx, maxLen, halfMax, left, top, maxImgData, _cropPixelsRef$curren, width, height, x, y, _fileRef$current, type, name, uid;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            onClose();\n            naturalImg = document.querySelector(\".\" + MEDIA_CLASS);\n            naturalWidth = naturalImg.naturalWidth, naturalHeight = naturalImg.naturalHeight;\n            canvas = document.createElement('canvas');\n            ctx = canvas.getContext('2d'); // create a max canvas to cover the source image after rotated\n\n            maxLen = Math.sqrt(Math.pow(naturalWidth, 2) + Math.pow(naturalHeight, 2));\n            canvas.width = maxLen;\n            canvas.height = maxLen; // rotate the image\n\n            if (hasRotate && rotateVal > 0 && rotateVal < 360) {\n              halfMax = maxLen / 2;\n              ctx.translate(halfMax, halfMax);\n              ctx.rotate(rotateVal * Math.PI / 180);\n              ctx.translate(-halfMax, -halfMax);\n            }\n\n            ctx.fillStyle = fillColor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height); // draw the source image in the center of the max canvas\n\n            left = (maxLen - naturalWidth) / 2;\n            top = (maxLen - naturalHeight) / 2;\n            ctx.drawImage(naturalImg, left, top); // shrink the max canvas to the crop area size, then align two center points\n\n            maxImgData = ctx.getImageData(0, 0, maxLen, maxLen);\n            _cropPixelsRef$curren = cropPixelsRef.current, width = _cropPixelsRef$curren.width, height = _cropPixelsRef$curren.height, x = _cropPixelsRef$curren.x, y = _cropPixelsRef$curren.y;\n            canvas.width = width;\n            canvas.height = height; // fill the background once again\n\n            ctx.fillStyle = fillColor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            ctx.putImageData(maxImgData, Math.round(-left - x), Math.round(-top - y)); // get the new image\n\n            _fileRef$current = fileRef.current, type = _fileRef$current.type, name = _fileRef$current.name, uid = _fileRef$current.uid;\n            canvas.toBlob( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(blob) {\n                var newFile, res, passedFile, _type;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        newFile = new File([blob], name, {\n                          type: type\n                        });\n                        newFile.uid = uid;\n\n                        if (!(typeof beforeUploadRef.current !== 'function')) {\n                          _context2.next = 4;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 4:\n                        res = beforeUploadRef.current(newFile, [newFile]);\n\n                        if (!(typeof res !== 'boolean' && !res)) {\n                          _context2.next = 8;\n                          break;\n                        }\n\n                        console.error('beforeUpload must return a boolean or Promise');\n                        return _context2.abrupt(\"return\");\n\n                      case 8:\n                        if (!(res === true)) {\n                          _context2.next = 10;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 10:\n                        if (!(res === false)) {\n                          _context2.next = 12;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", rejectRef.current('not upload'));\n\n                      case 12:\n                        if (!(res && typeof res.then === 'function')) {\n                          _context2.next = 25;\n                          break;\n                        }\n\n                        _context2.prev = 13;\n                        _context2.next = 16;\n                        return res;\n\n                      case 16:\n                        passedFile = _context2.sent;\n                        _type = Object.prototype.toString.call(passedFile);\n                        if (_type === '[object File]' || _type === '[object Blob]') newFile = passedFile;\n                        resolveRef.current(newFile);\n                        _context2.next = 25;\n                        break;\n\n                      case 22:\n                        _context2.prev = 22;\n                        _context2.t0 = _context2[\"catch\"](13);\n                        rejectRef.current(_context2.t0);\n\n                      case 25:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[13, 22]]);\n              }));\n\n              return function (_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), type, quality);\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  })), [hasRotate, onClose, quality, rotateVal]);\n\n  var renderComponent = function renderComponent(titleOfModal) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, renderUpload(), src && /*#__PURE__*/React.createElement(Modal, Object.assign({\n      visible: true,\n      wrapClassName: pkg + \"-modal\",\n      title: titleOfModal,\n      onOk: onOk,\n      onCancel: onClose,\n      maskClosable: false,\n      destroyOnClose: true\n    }, modalProps), /*#__PURE__*/React.createElement(EasyCrop, {\n      ref: ref,\n      src: src,\n      aspect: aspect,\n      shape: shape,\n      grid: grid,\n      hasZoom: hasZoom,\n      zoomVal: zoomVal,\n      rotateVal: rotateVal,\n      setZoomVal: setZoomVal,\n      setRotateVal: setRotateVal,\n      minZoom: minZoom,\n      maxZoom: maxZoom,\n      onComplete: onComplete,\n      cropperProps: cropperProps\n    }), hasZoom && /*#__PURE__*/React.createElement(\"div\", {\n      className: pkg + \"-control zoom\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: subZoomVal,\n      disabled: isMinZoom\n    }, \"\\uFF0D\"), /*#__PURE__*/React.createElement(Slider, {\n      min: minZoom,\n      max: maxZoom,\n      step: ZOOM_STEP,\n      value: zoomVal,\n      onChange: setZoomVal\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: addZoomVal,\n      disabled: isMaxZoom\n    }, \"\\uFF0B\")), hasRotate && /*#__PURE__*/React.createElement(\"div\", {\n      className: pkg + \"-control rotate\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: subRotateVal,\n      disabled: isMinRotate\n    }, \"\\u21BA\"), /*#__PURE__*/React.createElement(Slider, {\n      min: MIN_ROTATE,\n      max: MAX_ROTATE,\n      step: ROTATE_STEP,\n      value: rotateVal,\n      onChange: setRotateVal\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: addRotateVal,\n      disabled: isMaxRotate\n    }, \"\\u21BB\"))));\n  };\n\n  if (modalTitle) return renderComponent(modalTitle);\n  return /*#__PURE__*/React.createElement(LocaleReceiver, null, function (locale, localeCode) {\n    return renderComponent(localeCode === 'zh-cn' ? '编辑图片' : 'Edit image');\n  });\n});\nImgCrop.propTypes = {\n  aspect: t.number,\n  shape: t.oneOf(['rect', 'round']),\n  grid: t.bool,\n  quality: t.number,\n  zoom: t.bool,\n  rotate: t.bool,\n  minZoom: t.number,\n  maxZoom: t.number,\n  fillColor: t.string,\n  modalTitle: t.string,\n  modalWidth: t.oneOfType([t.number, t.string]),\n  modalOk: t.string,\n  modalCancel: t.string,\n  beforeCrop: t.func,\n  cropperProps: t.object,\n  children: t.node\n};\nImgCrop.defaultProps = {\n  aspect: 1,\n  shape: 'rect',\n  grid: false,\n  quality: 0.4,\n  zoom: true,\n  rotate: false,\n  minZoom: 1,\n  maxZoom: 3,\n  fillColor: 'white'\n};\nexport default ImgCrop;","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/node_modules/antd-img-crop/dist/antd-img-crop.esm.js"],"names":["__$styleInject","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","_asyncToGenerator","_extends","_objectWithoutPropertiesLoose","_regeneratorRuntime","React","forwardRef","useState","useCallback","useRef","useMemo","t","Cropper","LocaleReceiver","Modal","Slider","_excluded","pkg","noop","MEDIA_CLASS","ZOOM_STEP","MIN_ROTATE","MAX_ROTATE","ROTATE_STEP","EasyCrop","props","ref","src","aspect","shape","grid","hasZoom","zoomVal","rotateVal","setZoomVal","setRotateVal","minZoom","maxZoom","onComplete","cropperProps","_useState","x","y","crop","setCrop","_useState2","width","height","cropSize","setCropSize","onCropComplete","croppedArea","croppedAreaPixels","onMediaLoaded","mediaSize","ratioWidth","Object","assign","image","onCropChange","cropShape","showGrid","zoomWithScroll","zoom","rotation","onZoomChange","onRotationChange","classes","containerClassName","mediaClassName","propTypes","string","number","bool","func","object","ImgCrop","quality","rotate","fillColor","modalTitle","modalWidth","modalOk","modalCancel","beforeCrop","children","hasRotate","_useState3","setSrc","_useState4","_useState5","beforeUploadRef","fileRef","resolveRef","rejectRef","cropPixelsRef","renderUpload","upload","Array","isArray","_upload$props","beforeUpload","accept","restUploadProps","current","file","fileList","Promise","_ref","mark","_callee","resolve","reject","reader","wrap","_callee$","_context","prev","next","t0","sent","abrupt","FileReader","addEventListener","result","readAsDataURL","stop","_x","_x2","apply","arguments","isMinZoom","isMaxZoom","isMinRotate","isMaxRotate","subZoomVal","addZoomVal","subRotateVal","addRotateVal","modalProps","obj","okText","cancelText","keys","forEach","key","onClose","onOk","_callee3","naturalImg","naturalWidth","naturalHeight","canvas","ctx","maxLen","halfMax","left","top","maxImgData","_cropPixelsRef$curren","_fileRef$current","type","name","uid","_callee3$","_context3","querySelector","getContext","Math","sqrt","pow","translate","PI","fillStyle","fillRect","drawImage","getImageData","putImageData","round","toBlob","_ref3","_callee2","blob","newFile","res","passedFile","_type","_callee2$","_context2","File","console","error","then","prototype","toString","call","_x3","renderComponent","titleOfModal","Fragment","visible","wrapClassName","title","onCancel","maskClosable","destroyOnClose","className","onClick","disabled","min","max","step","value","onChange","locale","localeCode","oneOf","oneOfType","node","defaultProps"],"mappings":"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","sourcesContent":["function __$styleInject(css) {\n    if (!css) return;\n\n    if (typeof window == 'undefined') return;\n    var style = document.createElement('style');\n    style.setAttribute('media', 'screen');\n\n    style.innerHTML = css;\n    document.head.appendChild(style);\n    return css;\n}\n\nimport _asyncToGenerator from '@babel/runtime/helpers/esm/asyncToGenerator';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport React, { forwardRef, useState, useCallback, useRef, useMemo } from 'react';\nimport t from 'prop-types';\nimport Cropper from 'react-easy-crop';\nimport LocaleReceiver from 'antd/es/locale-provider/LocaleReceiver';\nimport Modal from 'antd/es/modal';\nimport Slider from 'antd/es/slider';\n\n__$styleInject(\".antd-img-crop-modal .ant-modal-body {\\n  padding-bottom: 16px;\\n}\\n.antd-img-crop-modal .antd-img-crop-container {\\n  position: relative;\\n  width: 100%;\\n  height: 40vh;\\n  margin-bottom: 16px;\\n}\\n.antd-img-crop-modal .antd-img-crop-control {\\n  display: flex;\\n  align-items: center;\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.antd-img-crop-modal .antd-img-crop-control button {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 34px;\\n  height: 34px;\\n  padding: 0;\\n  font-style: normal;\\n  background: transparent;\\n  border: 0;\\n  outline: 0;\\n  cursor: pointer;\\n}\\n.antd-img-crop-modal .antd-img-crop-control button[disabled] {\\n  cursor: default;\\n}\\n.antd-img-crop-modal .antd-img-crop-control.zoom button {\\n  font-size: 18px;\\n}\\n.antd-img-crop-modal .antd-img-crop-control.rotate button {\\n  font-size: 16px;\\n}\\n.antd-img-crop-modal .antd-img-crop-control.rotate button:first-of-type {\\n  transform: rotate(-20deg);\\n}\\n.antd-img-crop-modal .antd-img-crop-control.rotate button:last-of-type {\\n  transform: rotate(20deg);\\n}\\n.antd-img-crop-modal .antd-img-crop-control .ant-slider {\\n  flex: 1;\\n  margin: 0 8px;\\n}\\n\");\n\nvar _excluded = [\"beforeUpload\", \"accept\"];\nvar pkg = 'antd-img-crop';\n\nvar noop = function noop() {};\n\nvar MEDIA_CLASS = pkg + \"-media\";\nvar ZOOM_STEP = 0.1;\nvar MIN_ROTATE = 0;\nvar MAX_ROTATE = 360;\nvar ROTATE_STEP = 1;\nvar EasyCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var src = props.src,\n      aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      hasZoom = props.hasZoom,\n      zoomVal = props.zoomVal,\n      rotateVal = props.rotateVal,\n      setZoomVal = props.setZoomVal,\n      setRotateVal = props.setRotateVal,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      onComplete = props.onComplete,\n      cropperProps = props.cropperProps;\n\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      crop = _useState[0],\n      setCrop = _useState[1];\n\n  var _useState2 = useState({\n    width: 0,\n    height: 0\n  }),\n      cropSize = _useState2[0],\n      setCropSize = _useState2[1];\n\n  var onCropComplete = useCallback(function (croppedArea, croppedAreaPixels) {\n    onComplete(croppedAreaPixels);\n  }, [onComplete]);\n  var onMediaLoaded = useCallback(function (mediaSize) {\n    var width = mediaSize.width,\n        height = mediaSize.height;\n    var ratioWidth = height * aspect;\n\n    if (width > ratioWidth) {\n      setCropSize({\n        width: ratioWidth,\n        height: height\n      });\n    } else {\n      setCropSize({\n        width: width,\n        height: width / aspect\n      });\n    }\n  }, [aspect]);\n  return /*#__PURE__*/React.createElement(Cropper, Object.assign({}, cropperProps, {\n    ref: ref,\n    image: src,\n    crop: crop,\n    cropSize: cropSize,\n    onCropChange: setCrop,\n    aspect: aspect,\n    cropShape: shape,\n    showGrid: grid,\n    zoomWithScroll: hasZoom,\n    zoom: zoomVal,\n    rotation: rotateVal,\n    onZoomChange: setZoomVal,\n    onRotationChange: setRotateVal,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    onCropComplete: onCropComplete,\n    onMediaLoaded: onMediaLoaded,\n    classes: {\n      containerClassName: pkg + \"-container\",\n      mediaClassName: MEDIA_CLASS\n    }\n  }));\n});\nEasyCrop.propTypes = {\n  src: t.string,\n  aspect: t.number,\n  shape: t.string,\n  grid: t.bool,\n  hasZoom: t.bool,\n  zoomVal: t.number,\n  rotateVal: t.number,\n  setZoomVal: t.func,\n  setRotateVal: t.func,\n  minZoom: t.number,\n  maxZoom: t.number,\n  onComplete: t.func,\n  cropperProps: t.object\n};\nvar ImgCrop = /*#__PURE__*/forwardRef(function (props, ref) {\n  var aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      quality = props.quality,\n      zoom = props.zoom,\n      rotate = props.rotate,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      fillColor = props.fillColor,\n      modalTitle = props.modalTitle,\n      modalWidth = props.modalWidth,\n      modalOk = props.modalOk,\n      modalCancel = props.modalCancel,\n      beforeCrop = props.beforeCrop,\n      children = props.children,\n      cropperProps = props.cropperProps;\n  var hasZoom = zoom === true;\n  var hasRotate = rotate === true;\n\n  var _useState3 = useState(''),\n      src = _useState3[0],\n      setSrc = _useState3[1];\n\n  var _useState4 = useState(1),\n      zoomVal = _useState4[0],\n      setZoomVal = _useState4[1];\n\n  var _useState5 = useState(0),\n      rotateVal = _useState5[0],\n      setRotateVal = _useState5[1];\n\n  var beforeUploadRef = useRef();\n  var fileRef = useRef();\n  var resolveRef = useRef(noop);\n  var rejectRef = useRef(noop);\n  var cropPixelsRef = useRef();\n  /**\n   * Upload\n   */\n\n  var renderUpload = useCallback(function () {\n    var upload = Array.isArray(children) ? children[0] : children;\n\n    var _upload$props = upload.props,\n        beforeUpload = _upload$props.beforeUpload,\n        accept = _upload$props.accept,\n        restUploadProps = _objectWithoutPropertiesLoose(_upload$props, _excluded);\n\n    beforeUploadRef.current = beforeUpload;\n    return _extends({}, upload, {\n      props: _extends({}, restUploadProps, {\n        accept: accept || 'image/*',\n        beforeUpload: function beforeUpload(file, fileList) {\n          return new Promise( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n              var reader;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.t0 = beforeCrop;\n\n                      if (!_context.t0) {\n                        _context.next = 5;\n                        break;\n                      }\n\n                      _context.next = 4;\n                      return beforeCrop(file, fileList);\n\n                    case 4:\n                      _context.t0 = !_context.sent;\n\n                    case 5:\n                      if (!_context.t0) {\n                        _context.next = 8;\n                        break;\n                      }\n\n                      reject();\n                      return _context.abrupt(\"return\");\n\n                    case 8:\n                      fileRef.current = file;\n                      resolveRef.current = resolve;\n                      rejectRef.current = reject;\n                      reader = new FileReader();\n                      reader.addEventListener('load', function () {\n                        setSrc(reader.result);\n                      });\n                      reader.readAsDataURL(file);\n\n                    case 14:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x, _x2) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        }\n      })\n    });\n  }, [beforeCrop, children]);\n  /**\n   * EasyCrop\n   */\n\n  var onComplete = useCallback(function (croppedAreaPixels) {\n    cropPixelsRef.current = croppedAreaPixels;\n  }, []);\n  /**\n   * Controls\n   */\n\n  var isMinZoom = zoomVal - ZOOM_STEP < minZoom;\n  var isMaxZoom = zoomVal + ZOOM_STEP > maxZoom;\n  var isMinRotate = rotateVal === MIN_ROTATE;\n  var isMaxRotate = rotateVal === MAX_ROTATE;\n  var subZoomVal = useCallback(function () {\n    if (!isMinZoom) setZoomVal(zoomVal - ZOOM_STEP);\n  }, [isMinZoom, zoomVal]);\n  var addZoomVal = useCallback(function () {\n    if (!isMaxZoom) setZoomVal(zoomVal + ZOOM_STEP);\n  }, [isMaxZoom, zoomVal]);\n  var subRotateVal = useCallback(function () {\n    if (!isMinRotate) setRotateVal(rotateVal - ROTATE_STEP);\n  }, [isMinRotate, rotateVal]);\n  var addRotateVal = useCallback(function () {\n    if (!isMaxRotate) setRotateVal(rotateVal + ROTATE_STEP);\n  }, [isMaxRotate, rotateVal]);\n  /**\n   * Modal\n   */\n\n  var modalProps = useMemo(function () {\n    var obj = {\n      width: modalWidth,\n      okText: modalOk,\n      cancelText: modalCancel\n    };\n    Object.keys(obj).forEach(function (key) {\n      if (!obj[key]) delete obj[key];\n    });\n    return obj;\n  }, [modalCancel, modalOk, modalWidth]);\n  var onClose = useCallback(function () {\n    setSrc('');\n    setZoomVal(1);\n    setRotateVal(0);\n  }, []);\n  var onOk = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var naturalImg, naturalWidth, naturalHeight, canvas, ctx, maxLen, halfMax, left, top, maxImgData, _cropPixelsRef$curren, width, height, x, y, _fileRef$current, type, name, uid;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            onClose();\n            naturalImg = document.querySelector(\".\" + MEDIA_CLASS);\n            naturalWidth = naturalImg.naturalWidth, naturalHeight = naturalImg.naturalHeight;\n            canvas = document.createElement('canvas');\n            ctx = canvas.getContext('2d'); // create a max canvas to cover the source image after rotated\n\n            maxLen = Math.sqrt(Math.pow(naturalWidth, 2) + Math.pow(naturalHeight, 2));\n            canvas.width = maxLen;\n            canvas.height = maxLen; // rotate the image\n\n            if (hasRotate && rotateVal > 0 && rotateVal < 360) {\n              halfMax = maxLen / 2;\n              ctx.translate(halfMax, halfMax);\n              ctx.rotate(rotateVal * Math.PI / 180);\n              ctx.translate(-halfMax, -halfMax);\n            }\n\n            ctx.fillStyle = fillColor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height); // draw the source image in the center of the max canvas\n\n            left = (maxLen - naturalWidth) / 2;\n            top = (maxLen - naturalHeight) / 2;\n            ctx.drawImage(naturalImg, left, top); // shrink the max canvas to the crop area size, then align two center points\n\n            maxImgData = ctx.getImageData(0, 0, maxLen, maxLen);\n            _cropPixelsRef$curren = cropPixelsRef.current, width = _cropPixelsRef$curren.width, height = _cropPixelsRef$curren.height, x = _cropPixelsRef$curren.x, y = _cropPixelsRef$curren.y;\n            canvas.width = width;\n            canvas.height = height; // fill the background once again\n\n            ctx.fillStyle = fillColor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            ctx.putImageData(maxImgData, Math.round(-left - x), Math.round(-top - y)); // get the new image\n\n            _fileRef$current = fileRef.current, type = _fileRef$current.type, name = _fileRef$current.name, uid = _fileRef$current.uid;\n            canvas.toBlob( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(blob) {\n                var newFile, res, passedFile, _type;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        newFile = new File([blob], name, {\n                          type: type\n                        });\n                        newFile.uid = uid;\n\n                        if (!(typeof beforeUploadRef.current !== 'function')) {\n                          _context2.next = 4;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 4:\n                        res = beforeUploadRef.current(newFile, [newFile]);\n\n                        if (!(typeof res !== 'boolean' && !res)) {\n                          _context2.next = 8;\n                          break;\n                        }\n\n                        console.error('beforeUpload must return a boolean or Promise');\n                        return _context2.abrupt(\"return\");\n\n                      case 8:\n                        if (!(res === true)) {\n                          _context2.next = 10;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", resolveRef.current(newFile));\n\n                      case 10:\n                        if (!(res === false)) {\n                          _context2.next = 12;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", rejectRef.current('not upload'));\n\n                      case 12:\n                        if (!(res && typeof res.then === 'function')) {\n                          _context2.next = 25;\n                          break;\n                        }\n\n                        _context2.prev = 13;\n                        _context2.next = 16;\n                        return res;\n\n                      case 16:\n                        passedFile = _context2.sent;\n                        _type = Object.prototype.toString.call(passedFile);\n                        if (_type === '[object File]' || _type === '[object Blob]') newFile = passedFile;\n                        resolveRef.current(newFile);\n                        _context2.next = 25;\n                        break;\n\n                      case 22:\n                        _context2.prev = 22;\n                        _context2.t0 = _context2[\"catch\"](13);\n                        rejectRef.current(_context2.t0);\n\n                      case 25:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[13, 22]]);\n              }));\n\n              return function (_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), type, quality);\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  })), [hasRotate, onClose, quality, rotateVal]);\n\n  var renderComponent = function renderComponent(titleOfModal) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, renderUpload(), src && /*#__PURE__*/React.createElement(Modal, Object.assign({\n      visible: true,\n      wrapClassName: pkg + \"-modal\",\n      title: titleOfModal,\n      onOk: onOk,\n      onCancel: onClose,\n      maskClosable: false,\n      destroyOnClose: true\n    }, modalProps), /*#__PURE__*/React.createElement(EasyCrop, {\n      ref: ref,\n      src: src,\n      aspect: aspect,\n      shape: shape,\n      grid: grid,\n      hasZoom: hasZoom,\n      zoomVal: zoomVal,\n      rotateVal: rotateVal,\n      setZoomVal: setZoomVal,\n      setRotateVal: setRotateVal,\n      minZoom: minZoom,\n      maxZoom: maxZoom,\n      onComplete: onComplete,\n      cropperProps: cropperProps\n    }), hasZoom && /*#__PURE__*/React.createElement(\"div\", {\n      className: pkg + \"-control zoom\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: subZoomVal,\n      disabled: isMinZoom\n    }, \"\\uFF0D\"), /*#__PURE__*/React.createElement(Slider, {\n      min: minZoom,\n      max: maxZoom,\n      step: ZOOM_STEP,\n      value: zoomVal,\n      onChange: setZoomVal\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: addZoomVal,\n      disabled: isMaxZoom\n    }, \"\\uFF0B\")), hasRotate && /*#__PURE__*/React.createElement(\"div\", {\n      className: pkg + \"-control rotate\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: subRotateVal,\n      disabled: isMinRotate\n    }, \"\\u21BA\"), /*#__PURE__*/React.createElement(Slider, {\n      min: MIN_ROTATE,\n      max: MAX_ROTATE,\n      step: ROTATE_STEP,\n      value: rotateVal,\n      onChange: setRotateVal\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: addRotateVal,\n      disabled: isMaxRotate\n    }, \"\\u21BB\"))));\n  };\n\n  if (modalTitle) return renderComponent(modalTitle);\n  return /*#__PURE__*/React.createElement(LocaleReceiver, null, function (locale, localeCode) {\n    return renderComponent(localeCode === 'zh-cn' ? '编辑图片' : 'Edit image');\n  });\n});\nImgCrop.propTypes = {\n  aspect: t.number,\n  shape: t.oneOf(['rect', 'round']),\n  grid: t.bool,\n  quality: t.number,\n  zoom: t.bool,\n  rotate: t.bool,\n  minZoom: t.number,\n  maxZoom: t.number,\n  fillColor: t.string,\n  modalTitle: t.string,\n  modalWidth: t.oneOfType([t.number, t.string]),\n  modalOk: t.string,\n  modalCancel: t.string,\n  beforeCrop: t.func,\n  cropperProps: t.object,\n  children: t.node\n};\nImgCrop.defaultProps = {\n  aspect: 1,\n  shape: 'rect',\n  grid: false,\n  quality: 0.4,\n  zoom: true,\n  rotate: false,\n  minZoom: 1,\n  maxZoom: 3,\n  fillColor: 'white'\n};\n\nexport default ImgCrop;\n"]},"metadata":{},"sourceType":"module"}