{"ast":null,"code":"import _slicedToArray from\"/var/www/html/project/vivaquad/admin-vivaquad/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{SearchOutlined}from'@ant-design/icons';import{Typography}from'antd';import React,{useRef,useEffect,useState}from'react';import{Editor}from'react-draft-wysiwyg';import{EditorState,convertToRaw,ContentState}from'draft-js';import{convertToHTML}from'draft-convert';//import htmlToText from 'html-to-text';\nimport htmlToDraft from'html-to-draftjs';import'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';import styles from'./style.less';var Text=Typography.Text;var toolbar={options:['inline','link','textAlign','list'],list:{inDropdown:true},textAlign:{inDropdown:true}};var TextEditor=function TextEditor(props){var _useState=useState(function(){return EditorState.createEmpty();}),_useState2=_slicedToArray(_useState,2),editorState=_useState2[0],setEditorState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFirstCall=_useState4[0],setfirstCall=_useState4[1];useEffect(function(){var unmounted=false;if(isFirstCall==false&&props.data){var blocksFromHtml=htmlToDraft(props.data);var contentBlocks=blocksFromHtml.contentBlocks,entityMap=blocksFromHtml.entityMap;var contentState=ContentState.createFromBlockArray(contentBlocks,entityMap);var _editorState=EditorState.createWithContent(contentState);console.log(\"contentBlock : \",_editorState);setEditorState(_editorState);setfirstCall(true);return function(){unmounted=true;};}},[props]);var onEditorStateChange=function onEditorStateChange(editorState){console.log(\"onEditorStateChange : \",convertToHTML(editorState.getCurrentContent()));setEditorState(editorState);props.returnVal(convertToHTML(editorState.getCurrentContent()));};return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center',padding:'0 0'}},/*#__PURE__*/React.createElement(Editor,{editorState:editorState,textAlignment:\"left\",wrapperClassName:\"wrapperClassName\",editorClassName:\"mainEditorStyle EditorStyle\",toolbarClassName:\"toolbarStyle wrapperStyle\",toolbar:toolbar,onEditorStateChange:onEditorStateChange,onDownArrow:true}));};export default TextEditor;","map":{"version":3,"sources":["/var/www/html/project/vivaquad/admin-vivaquad/src/components/sharing/text-editor/index.jsx"],"names":["SearchOutlined","Typography","React","useRef","useEffect","useState","Editor","EditorState","convertToRaw","ContentState","convertToHTML","htmlToDraft","styles","Text","toolbar","options","list","inDropdown","textAlign","TextEditor","props","createEmpty","editorState","setEditorState","isFirstCall","setfirstCall","unmounted","data","blocksFromHtml","contentBlocks","entityMap","contentState","createFromBlockArray","createWithContent","console","log","onEditorStateChange","getCurrentContent","returnVal","padding"],"mappings":"oKAAA,OAASA,cAAT,KAA+B,mBAA/B,CACA,OAAQC,UAAR,KAA0B,MAA1B,CACA,MAAOC,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,OAASC,WAAT,CAAsBC,YAAtB,CAAoCC,YAApC,KAAwD,UAAxD,CACA,OAASC,aAAT,KAA8B,eAA9B,CACA;AACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAO,kDAAP,CAEA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,GAAQC,CAAAA,IAAR,CAAiBZ,UAAjB,CAAQY,IAAR,CACA,GAAMC,CAAAA,OAAO,CAAG,CAAEC,OAAO,CAAE,CAAC,QAAD,CAAU,MAAV,CAAkB,WAAlB,CAA8B,MAA9B,CAAX,CAAkDC,IAAI,CAAE,CAAEC,UAAU,CAAE,IAAd,CAAxD,CAA8EC,SAAS,CAAE,CAAED,UAAU,CAAE,IAAd,CAAzF,CAAhB,CAEA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,KAAK,CAAI,CAE1B,cAAsCf,QAAQ,CAAC,iBAAME,CAAAA,WAAW,CAACc,WAAZ,EAAN,EAAD,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eACA,eAAoClB,QAAQ,CAAC,KAAD,CAA5C,yCAAOmB,WAAP,eAAoBC,YAApB,eAEDrB,SAAS,CAAC,UAAM,CACf,GAAIsB,CAAAA,SAAS,CAAG,KAAhB,CACA,GAAGF,WAAW,EAAI,KAAf,EAAwBJ,KAAK,CAACO,IAAjC,CAAsC,CACrC,GAAMC,CAAAA,cAAc,CAAGjB,WAAW,CAACS,KAAK,CAACO,IAAP,CAAlC,CACA,GAAQE,CAAAA,aAAR,CAAqCD,cAArC,CAAQC,aAAR,CAAuBC,SAAvB,CAAqCF,cAArC,CAAuBE,SAAvB,CACA,GAAMC,CAAAA,YAAY,CAAGtB,YAAY,CAACuB,oBAAb,CAAkCH,aAAlC,CAAiDC,SAAjD,CAArB,CACA,GAAMR,CAAAA,YAAW,CAAGf,WAAW,CAAC0B,iBAAZ,CAA8BF,YAA9B,CAApB,CACAG,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+Bb,YAA/B,EACCC,cAAc,CAACD,YAAD,CAAd,CACAG,YAAY,CAAC,IAAD,CAAZ,CACD,MAAO,WAAM,CACZC,SAAS,CAAG,IAAZ,CACA,CAFD,CAGA,CACE,CAdK,CAcJ,CAACN,KAAD,CAdI,CAAT,CAgBA,GAAMgB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACd,WAAD,CAAiB,CAC5CY,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCzB,aAAa,CAACY,WAAW,CAACe,iBAAZ,EAAD,CAAnD,EACAd,cAAc,CAACD,WAAD,CAAd,CACAF,KAAK,CAACkB,SAAN,CAAgB5B,aAAa,CAACY,WAAW,CAACe,iBAAZ,EAAD,CAA7B,EACA,CAJD,CAMC,mBACE,2BAAK,KAAK,CAAE,CAACnB,SAAS,CAAC,QAAX,CAAqBqB,OAAO,CAAC,KAA7B,CAAZ,eACF,oBAAC,MAAD,EAAQ,WAAW,CAAEjB,WAArB,CAAkC,aAAa,CAAE,MAAjD,CAAyD,gBAAgB,CAAC,kBAA1E,CAA6F,eAAe,CAAE,6BAA9G,CAA6I,gBAAgB,CAAE,2BAA/J,CAA4L,OAAO,CAAER,OAArM,CAA8M,mBAAmB,CAAEsB,mBAAnO,CAAwP,WAAW,KAAnQ,EADE,CADF,CAKD,CAhCD,CAkCA,cAAejB,CAAAA,UAAf","sourcesContent":["import { SearchOutlined } from '@ant-design/icons';\r\nimport {Typography } from 'antd'\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\r\nimport { convertToHTML } from 'draft-convert';\r\n//import htmlToText from 'html-to-text';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\n\r\nimport styles from './style.less'; \r\nconst { Text } = Typography;\r\nconst toolbar = { options: ['inline','link', 'textAlign','list'], list: { inDropdown: true }, textAlign: { inDropdown: true }, }\r\n\r\nconst TextEditor = props => {\r\n\r\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty());\r\n  const [isFirstCall, setfirstCall] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tlet unmounted = false;\r\n\t\tif(isFirstCall == false && props.data){\r\n\t\t\tconst blocksFromHtml = htmlToDraft(props.data);\r\n\t\t\tconst { contentBlocks, entityMap } = blocksFromHtml;\r\n\t\t\tconst contentState = ContentState.createFromBlockArray(contentBlocks, entityMap);\r\n\t\t\tconst editorState = EditorState.createWithContent(contentState);\r\n\t\t\tconsole.log(\"contentBlock : \", editorState);\r\n\t\t\t setEditorState(editorState)\r\n\t\t\t setfirstCall(true);\r\n\t\t\treturn () => {\r\n\t\t\t\tunmounted = true;\r\n\t\t\t}\r\n\t\t}\r\n    },[props])\r\n\t\r\n\tconst onEditorStateChange = (editorState) => {\r\n\t\tconsole.log(\"onEditorStateChange : \", convertToHTML(editorState.getCurrentContent()));\r\n\t\tsetEditorState(editorState);\r\n\t\tprops.returnVal(convertToHTML(editorState.getCurrentContent()))\r\n\t}\r\n\t\r\n  return (\r\n    <div style={{textAlign:'center', padding:'0 0'}}>\r\n\t\t<Editor editorState={editorState} textAlignment={\"left\"} wrapperClassName=\"wrapperClassName\" editorClassName={\"mainEditorStyle EditorStyle\"} toolbarClassName={\"toolbarStyle wrapperStyle\"} toolbar={toolbar} onEditorStateChange={onEditorStateChange} onDownArrow />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextEditor;\r\n"]},"metadata":{},"sourceType":"module"}